{"version":3,"file":"react-router-manage.development.js","sources":["../../src/components/NoAuth/index.tsx","../../src/components/NameRedirect/index.tsx","../../src/components/Spin/index.tsx","../../src/changeable.tsx","../../src/GeneratorHookCom.tsx","../../src/components/NotFound/index.tsx","../../src/util.tsx","../../src/getInitialState.ts","../../src/Context/MRouterHistoryContext.tsx","../../src/BrowserRouter.tsx","../../src/HashRouter.tsx","../../src/type.ts","../../src/actions.ts","../../src/Context/MRouterContext.tsx","../../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nconst PageConfig = {\n  '401': {\n    title: '无权限查看该页面',\n    img: '//ysf.qiyukf.net/yx/9c9ce7793b3c0657da5d80e740a89681',\n  },\n  '404': {\n    title: '页面不存在',\n    img: 'https://ysf.nosdn.127.net/ysh/6be90dea7806767fe65e7b48982b7a61',\n  },\n} as Record<string, {title: string; img: string}>;\n\nconst NoAuth: React.FC<{ code?: string }> = ({ code = '401' }) => {\n  const config = PageConfig[code];\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        background: 'white',\n        height: '100%',\n        flexDirection: 'column',\n        borderRadius: 8,\n      }}\n    >\n      <img alt={config.title} width={200} src={config?.img} />\n      <div\n        style={{ color: '#666666', lineHeight: '22px', textAlign: 'center', marginTop: 16 }}\n      >\n        {config.title}\n      </div>\n    </div>\n  );\n};\n\nNoAuth.displayName = 'NoAuth';\n\nexport default NoAuth;\n","import * as React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useRouter } from '../../index';\n\nconst NameRedirect: React.FC<{ name: string; component?: React.ComponentType<any> }> = ({ name, component: Component }) => {\n  const { routesMap, currentRoute } = useRouter();\n\n  const targetRoute = routesMap[name];\n\n  if (!targetRoute) {\n    if (__DEV__) {\n      Error(`routesMap.${name} 路由不存在`);\n    }\n  }\n\n  if (name === currentRoute.name) {\n    if (Component) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      return <Component />;\n    }\n    return <></>;\n  }\n\n  return <Navigate to={targetRoute.path || ''} />;\n};\n\nexport default NameRedirect;\n","import * as React from 'react';\nconst Spin:React.FC<{tip: string}> = ({tip = \"加载中\"})  => {\n  return <div>{tip}</div>;\n}\n\nexport default Spin;\n","import * as React from 'react';\nimport Spin from './components/Spin'\nconst LoadingCmp = () => <><Spin tip=\"应用正在加载中…\" /></>;\n\n/**\n * LoadingComponent Define the Suspense component's fallback and beforeEnter when a component is loaded, \n * and the state component when calling next\n */\ninterface ChangeableI {\n    LoadingComponent: React.FunctionComponent<any>\n}\n\nconst changeable: ChangeableI = {\n    LoadingComponent: LoadingCmp,\n}\n\nfunction setChangeable(options: Partial<ChangeableI>) {\n    Object.entries(options).forEach(([key , value]) => {\n        changeable[key as keyof ChangeableI] = value\n    })\n}\n\nexport {\n    changeable,\n    setChangeable\n}","import * as React from \"react\";\nimport { useLayoutEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport NameRedirect from \"./components/NameRedirect\";\nimport type {\n  BeforeEachMountI,\n  BeforeEnterI,\n  NextOptionsType,\n  RouteTypeI\n} from \"./type\";\n\nimport { useRouter } from \"./index\";\nimport { isComponent, isString } from \"./util\";\nimport { changeable } from \"./changeable\";\n\nfunction getComponent(\n  options?: NextOptionsType,\n  Component?: React.ComponentType\n) {\n  let ReplaceComponent: React.ComponentType<any> | undefined;\n  if (!options) {\n    return ReplaceComponent;\n  }\n  // if a component is passed in\n  if (isComponent(options)) {\n    ReplaceComponent = options as React.ComponentType<any>;\n    // @ts-ignore\n  } else if (isString(options.path)) {\n    // if there is path, path is preferred\n    ReplaceComponent = function Redirect() {\n      // @ts-ignore\n      return <Navigate to={options.path!} />;\n    };\n     // @ts-ignore\n  } else if (isString(options.name)) {\n    // if there is no path, use name\n    ReplaceComponent = function Redirect() {\n      // @ts-ignore\n      return <NameRedirect name={options.name!} component={Component} />;\n    };\n  }\n  return ReplaceComponent;\n}\n\nexport const GeneratorHookCom: React.FC<{\n  beforeEnter?: BeforeEnterI;\n  beforeEachMount?: BeforeEachMountI;\n  Component: any;\n  _route: RouteTypeI;\n}> = ({ beforeEnter, Component, beforeEachMount }) => {\n  /**\n   * since setCurrentComponent(Component) Component may be a function\n   * react by default, if the preState is a function, the function will be executed and an error will occur\n   * So here we put Component into an object\n   */\n  const [CurrentComponent, setCurrentComponent] = useState<{ Component: any }>({\n    Component: undefined\n  });\n  const { currentRoute } = useRouter();\n  useLayoutEffect(() => {\n    // 是否激活状态(未卸载)\n    let isActive = true;\n    // 全局的\n    if (beforeEachMount) {\n      beforeEachMount(currentRoute, options => {\n        if (!isActive) {\n          return;\n        }\n\n        // global\n        const EachReplaceComponent = getComponent(options, Component);\n        if (beforeEnter) {\n          // local\n          beforeEnter(currentRoute, enterOptions => {\n            if (!isActive) {\n              return;\n            }\n            const EnterReplaceComponent = getComponent(\n              enterOptions,\n              EachReplaceComponent || Component\n            );\n            // if the Component is passed in next in beforeEnter, the beforeEnter shall prevail\n\n            // Otherwise, beforeEachBeforeMount shall prevail\n            setCurrentComponent({\n              Component:\n                EnterReplaceComponent || EachReplaceComponent || Component\n            });\n          });\n        } else {\n          setCurrentComponent({ Component: EachReplaceComponent || Component });\n        }\n      });\n    } else {\n      // local\n      if (beforeEnter) {\n        beforeEnter(currentRoute, enterOptions => {\n          if (!isActive) {\n            return;\n          }\n          const EnterReplaceComponent = getComponent(enterOptions, Component);\n          setCurrentComponent({\n            Component: EnterReplaceComponent || Component\n          });\n        });\n      }\n    }\n    return () => {\n      isActive = false;\n    };\n  }, [Component, currentRoute, beforeEnter, beforeEachMount]);\n  const LoadingCmp = changeable.LoadingComponent;\n  return CurrentComponent.Component ? (\n    <CurrentComponent.Component />\n  ) : (\n    <LoadingCmp />\n  );\n};\n\nexport default GeneratorHookCom;\n","import * as React from 'react';\nimport NoAuth from '../NoAuth';\n\nconst NotFound: React.FC = () => {\n  return <NoAuth code=\"404\" />;\n};\n\nexport default NotFound;\n","import * as React from 'react';\nimport type { To } from 'react-router';\nimport { Navigate } from 'react-router';\nimport NoAuth from './components/NoAuth';\nimport type {\n  BeforeEachMountI,\n  CodeType,\n  FnCodeType,\n  PermissionListType,\n  RouteCbI,\n  RouteEvent,\n  RouteTypeExtendsI,\n  RouteTypeI,\n  RouteTypeInputI,\n  RouteTypePropsI,\n  RouterConfigI,\n  RoutesMapI,\n  RouterBaseConfigI,\n  NewStateQueryI,\n  NewStateI,\n} from './type';\nimport GeneratorHookCom from './GeneratorHookCom';\nimport NotFound from './components/NotFound';\nimport { setChangeable } from './changeable';\n\nlet incrementKey = 1;\nconst getIncrementName = () => {\n  const name = `__routerName${incrementKey}`;\n  incrementKey = incrementKey + 1;\n  return name;\n};\n\nfunction getWholePath (path: string, basename = '/', parentPath?: string): string {\n  if (path.startsWith(basename)) {\n    return path;\n  }\n  // 根路径\n  if (path === basename) {\n    return basename;\n  }\n\n  if (path.startsWith('/')) {\n    if (basename.endsWith('/')) {\n      return `${basename}${path.slice(1)}`;\n    }\n    return `${basename}${path}`;\n  }\n\n  if (parentPath) {\n    return getWholePath(path, parentPath);\n  }\n\n  if (basename.endsWith('/')) {\n    return `${basename}${path}`;\n  }\n  return `${basename}/${path}`;\n}\n\nexport function cloneRoutes (_routeConfig: {\n  routes: RouteTypeI[]\n  parent?: RouteTypeInputI\n  basename?: string\n  _level?: number\n}): RouteTypeInputI[] {\n  const { routes, parent, basename = '/', _level = 1 } = _routeConfig;\n  if (!routes) {\n    return [];\n  }\n  if (!Array.isArray(routes)) {\n    Error('MRouter route prop need to type Array<RouteTypeI>');\n  }\n  function _cloneRoutes (_routes: RouteTypeI[], parent?: RouteTypeInputI, _level = 1): RouteTypeInputI[] {\n    return _routes.map(_route => {\n      const { path, items, children, ...resets } = _route;\n      const wholePath = getWholePath(path, basename, parent?.path);\n      const newRoute: RouteTypeInputI = {\n        ...resets,\n        path: getValidPathname(wholePath),\n        parent,\n        _level,\n        _relativePath: path,\n      };\n      if (items) {\n        newRoute.items = _cloneRoutes(items, newRoute, _level + 1);\n      }\n      if (children) {\n        newRoute.children = _cloneRoutes(children, newRoute, _level + 1);\n      }\n\n      return newRoute;\n    });\n  }\n  return _cloneRoutes(routes, parent, _level);\n}\n\n/**\n *cCalculate some state data\n * @param inputRoutes\n * @param permissionList\n * @returns\n */\nexport function computedNewState (config: NewStateQueryI):NewStateI {\n  const { inputRoutes, permissionList, hasAuth, beforeEachMount, basename, location } = config;\n  const authInputRoutes = computeRoutesConfig({\n    routes: inputRoutes,\n    permissionList,\n    hasAuth,\n    beforeEachMount,\n  });\n  const flattenRoutes = flattenRoutesFn(authInputRoutes, undefined, true);\n  // mixin into the notFound page\n  mixinNotFoundPage(flattenRoutes, basename, authInputRoutes);\n  const routesMap = routesMapFn(flattenRoutes);\n  const currentRoute = getCurrentRoute(location.pathname, routesMap);\n  const currentPathRoutes = getCurrentPathRoutes(currentRoute);\n \n  return {\n    authInputRoutes,\n    flattenRoutes,\n    routesMap,\n    currentRoute,\n    currentPathRoutes,\n    beforeEachMount,\n  };\n}\n\n/**\n * flatten the react router array recursively\n * whether all is true, includes sub routes\n */\nexport const flattenRoutesFn = (\n  arr: RouteTypeExtendsI[],\n  parent?: RouteTypeExtendsI,\n  all?: boolean\n): RouteTypeExtendsI[] => {\n  return arr.reduce((prev: RouteTypeExtendsI[], nextRoute: RouteTypeExtendsI) => {\n    if (parent) {\n      nextRoute.parent = parent;\n    }\n    if (Array.isArray(nextRoute.items) || Array.isArray(nextRoute.children)) {\n      let _routes = prev.concat(nextRoute);\n      if (Array.isArray(nextRoute.items)) {\n        _routes = _routes.concat(flattenRoutesFn(nextRoute.items, nextRoute, all));\n      }\n      if (Array.isArray(nextRoute.children) && all) {\n        _routes = _routes.concat(flattenRoutesFn(nextRoute.children, nextRoute, all));\n      }\n      return _routes;\n    } else {\n      return prev.concat(nextRoute);\n    }\n  }, []);\n};\n\n// name => mapping of route\nexport const routesMapFn = (flattenRoutes: RouteTypeExtendsI[]): RoutesMapI => {\n  const routesMap = flattenRoutes.reduce(\n    (_routeMap: RoutesMapI, nextRoute: RouteTypeExtendsI) => {\n      const { name, path } = nextRoute;\n      if (_routeMap[name] || _routeMap[path]) {\n\n        throw new Error(`route config name or path isn't unique, route name: \"${name}\", route path: \"${path}\"`);\n      }\n      // the route has params\n      // stored internally '__paramsRoutes' variable\n      if (path.includes(':')) {\n        const _path = path.replace(/:(\\w+)/g, () => {\n          return '([^\\\\/]+)';\n        });\n        _routeMap.__paramsRoutesMap[_path] = nextRoute;\n      }\n      _routeMap[name] = _routeMap[path] = nextRoute;\n      return _routeMap;\n    },\n    {\n      __paramsRoutesMap: {},\n      __flattenRoutes: [] as RouteTypeExtendsI[],\n    } as RoutesMapI\n  );\n  routesMap.__flattenRoutes = flattenRoutes;\n  return routesMap;\n};\n\n// convert '/a/b/c/' to '/a/b/c'\nfunction getValidPathname (pathname: string) {\n  if (!pathname) {\n    return pathname;\n  }\n  if (pathname.endsWith('/')) {\n    return pathname.slice(0, -1);\n  }\n  return pathname;\n}\n\n/** find the current route object through the path */\nexport function getCurrentRoute (\n  pathname = window.location.pathname,\n  routesMap: RoutesMapI\n) {\n  // console.log(routesMap);\n  // first look from the outermost routesMap\n  pathname = getValidPathname(pathname);\n  let currentRoute = routesMap[pathname];\n  // if can't find it, go to find to routesMap.__paramsRoutesMap\n  if (!currentRoute) {\n    const paths = Object.keys(routesMap.__paramsRoutesMap);\n    let pathIndex = 0;\n    while (!currentRoute && pathIndex < paths.length) {\n      const pathPattern = new RegExp(paths[pathIndex]);\n      if (pathname.match(pathPattern)) {\n        currentRoute = routesMap.__paramsRoutesMap[paths[pathIndex]];\n        break;\n      }\n      pathIndex = pathIndex + 1;\n    }\n  }\n  // TODO 找通配符的 后续优化\n  if (!currentRoute) {\n    // 有通配符的路径\n    const paths = routesMap.__flattenRoutes.map(i => i.path).filter(i => i.endsWith('*'));\n    // find the longest one\n    let longerPath = '';\n    paths.forEach(path => {\n      path = pathStartMarkTransform(path);\n      if (!pathname.startsWith(path)) {\n        return;\n      }\n      if (path in routesMap && path.length > longerPath.length) {\n        longerPath = path;\n      }\n      // 匹配 /a/b/c*\n      let _path = `${path}*`;\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n      // 匹配 /a/b/c/*\n      _path = `${path}/*`;\n\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n\n      // 匹配 /a/b/c*\n      _path = `${pathname}*`;\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n      // 匹配 /a/b/c/*\n      _path = `${pathname}/*`;\n\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n    });\n    if (longerPath) {\n      currentRoute = routesMap[longerPath];\n    }\n  }\n  // if (!currentRoute) {\n  //   // 找父级\n\n  // }\n  if (!currentRoute) {\n    // 默认404\n    currentRoute = {\n      name: '404',\n      path: pathname,\n      title: '404',\n      _isHasAuth: false,\n      _relativePath: '',\n      _level: 0,\n      meta: {},\n      component: () => {\n        return <NoAuth />;\n      },\n    };\n  }\n  return currentRoute;\n}\n\n/**\n * 获取路由的路径（父路由和子路由的集合，主要在导航中）\n * @param currentRoute\n * @returns\n */\nexport function getCurrentPathRoutes (currentRoute: RouteTypeExtendsI) {\n  const routes: RouteTypeExtendsI[] = [];\n  let pathRoute: RouteTypeExtendsI | undefined = currentRoute;\n  while (pathRoute) {\n    routes.unshift(pathRoute);\n    pathRoute = pathRoute.parent;\n  }\n  return routes;\n}\n\nexport function executeEventCbs (option: {\n  to?: RouteTypeExtendsI\n  from?: RouteTypeExtendsI\n  callbacks: RouteCbI[]\n  finish: () => void\n}) {\n  const { to, from, callbacks, finish } = option;\n  function executeNextCb (cbIndex = 0) {\n    const nextCb = callbacks[cbIndex];\n    if (!nextCb) {\n      return finish();\n    } else {\n      nextCb.fn(to, from, () => {\n        executeNextCb(cbIndex + 1);\n      });\n    }\n  }\n  if (callbacks.length === 0) {\n    finish();\n  } else {\n    executeNextCb(0);\n  }\n}\n\nfunction getIsHasAuthByStrCode (code: string, permissionList: PermissionListType) {\n  return permissionList.includes(code);\n}\n\nfunction getIsHasAuthByFnCode (code: FnCodeType, route: RouteTypeI) {\n  return code(route);\n}\n\nexport function getIsHasAuth ({ code, permissionList, hasAuth, route }: { code: CodeType; permissionList: PermissionListType; hasAuth: boolean; route: RouteTypeI }) {\n  if (!hasAuth) { // 未配置权限\n    return true;\n  }\n  if (!code) { // 未配置code默认有权限\n    return true;\n  }\n\n  if (Array.isArray(code)) {\n    if (code.length === 0) {\n      return true;\n    }\n    return code.some(_code => {\n      return getIsHasAuthByStrCode(_code, permissionList);\n    });\n  }\n\n  if (code instanceof Function) {\n    return !!(getIsHasAuthByFnCode(code, route));\n  }\n\n  return getIsHasAuthByStrCode(code, permissionList);\n}\n\nexport function computeRoutesConfig (config: {\n  routes: RouteTypeInputI[]\n  permissionList?: string[]\n  hasAuth: boolean\n  beforeEachMount?: BeforeEachMountI\n  parent?: RouteTypeExtendsI\n}): RouteTypeExtendsI[] {\n  const { routes, permissionList = [], hasAuth, beforeEachMount, parent } = config;\n  return routes.map(route => {\n    const {\n      component: Component,\n      path,\n      code = '',\n      children,\n      items,\n      beforeEnter,\n      redirect,\n      meta,\n      type,\n      ...other\n    } = route;\n    let _children: RouteTypeExtendsI[] = [];\n    let _items: RouteTypeExtendsI[] = [];\n    let CurrentComponent = Component;\n    const props = {} as RouteTypePropsI;\n    if (beforeEnter || beforeEachMount) {\n      CurrentComponent = GeneratorHookCom;\n      props.beforeEnter = beforeEnter;\n      props.beforeEachMount = beforeEachMount;\n      props.Component = Component;\n      props.key = route.name; // users switch between routes to avoid incorrect rendering due to the same key after route switching\n      props._route = route;\n    }\n    const isHasAuth = getIsHasAuth({ code, permissionList, hasAuth, route });\n\n    const newRoute: RouteTypeExtendsI = {\n      ...route,\n      parent,\n      props,\n      meta: meta || {},\n      items: [],\n      children: [],\n      _route: route,\n      _isHasAuth: isHasAuth,\n    };\n\n    if (!isHasAuth) {\n      /**\n       * if there is no permission, the children also has no permission\n       * /a/b/c 则加入 /a/b/c/*\n       */\n      let noAuthItems: RouteTypeExtendsI[] = [];\n      if (!path.endsWith('*')) {\n        const _path = path.endsWith('/') ? `${path}*` : `${path}/*`;\n        noAuthItems = [\n          {\n            meta: {},\n            name: getIncrementName(),\n            path: _path,\n            title: '',\n            hidden: true,\n            component: NoAuth,\n            _level: other._level + 1,\n            _route: route,\n            _component: NoAuth,\n            _relativePath: '*',\n          },\n        ];\n      }\n      const returnRoute = {\n        ...newRoute,\n        items: noAuthItems,\n        children: [],\n        _component: NoAuth,\n      };\n      noAuthItems.forEach(i => {\n        i.parent = returnRoute;\n      });\n      return returnRoute;\n    }\n\n    // 处理子路由\n    if (children) {\n      _children = computeRoutesConfig({\n        routes: children,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        parent: newRoute,\n      });\n    }\n    // 处理同级路由\n    if (items) {\n      _items = computeRoutesConfig({\n        routes: items,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        parent: newRoute,\n      });\n    }\n    const _itemsAndChildren = [..._items, ..._children];\n    if (redirect) {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: () => <Navigate to={redirect} replace={true} />,\n        _itemsAndChildren,\n      };\n    }\n    if (type === 'null') {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: undefined,\n        _itemsAndChildren,\n      };\n    }\n    if (Component) {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: CurrentComponent,\n        _itemsAndChildren,\n      };\n    } else {\n      const redirectPath = handleRedirectPath(route, permissionList, hasAuth);\n      if (redirectPath) {\n        let replace = false;\n        // 父级也没配置component，则会进行多次重定向进行replace, 以便浏览器回退行为\n        if (!route.parent?.component) {\n          replace = true;\n        }\n        return {\n          ...newRoute,\n          children: _children,\n          items: _items,\n          _component: () => <Navigate to={redirectPath} replace={replace} />,\n          _itemsAndChildren,\n        };\n      }\n      return {\n        ...newRoute,\n        items: [],\n        children: [],\n        _component: NoAuth,\n      };\n    }\n  });\n}\n\nexport function getCurrentRouteCbsByEvent (\n  routeEvent: RouteEvent,\n  pathname: string,\n  routeHooks: RouteCbI[]\n): RouteCbI[] {\n  return routeHooks.filter(i => {\n    return i.name === routeEvent && i.pathname === pathname;\n  });\n}\n\nfunction pathStartMarkTransform (path: string) {\n  if (path === '/') {\n    return path;\n  }\n  return path.replace(/\\/*\\**$/gm, '');\n}\n\n/**\n * when jump route，Remove the '*'\n * @param to\n * @returns\n */\nexport function getRealTo (to: To): To {\n  if (typeof to === 'string') {\n    return pathStartMarkTransform(to);\n  }\n  const { pathname } = to;\n  if (pathname) {\n    return {\n      ...to,\n      pathname: pathStartMarkTransform(pathname),\n    };\n  }\n  return to;\n}\n\nexport const handleRedirectPath = (\n  route: RouteTypeInputI,\n  permissionList: string[],\n  hasAuth: boolean\n): string => {\n  // Return to the first menu(route) item with permission\n  const { items } = route;\n  if (!items) {\n    return '';\n  }\n  // No configuration permission, return to the first one child route\n  if (!hasAuth) {\n    return items[0].path;\n  }\n  let redirectPath = '';\n  // find the first one route with permission\n  for (let i = 0; i < items?.length; i++) {\n    const childRoute = items[i];\n    const { code, path } = childRoute;\n    if (!code) {\n      // if code is false, the default is permission\n      redirectPath = path;\n      break;\n    }\n\n    if (getIsHasAuth({ code, permissionList, hasAuth, route: childRoute })) {\n      redirectPath = path;\n      break;\n    }\n  }\n  return redirectPath;\n};\n\nexport function mixinNotFoundPage (\n  flattenRoutes: RouteTypeExtendsI[],\n  basename: string,\n  authInputRoutes: RouteTypeExtendsI[]\n) {\n  const notFoundPath = getWholePath('*', basename);\n  const hasNotFoundPage = flattenRoutes.some(({ path }) => {\n    if (path === notFoundPath) {\n      return true;\n    }\n    return false;\n  });\n  if (hasNotFoundPage) {\n    return;\n  }\n\n  const notFoundPage = {\n    name: 'notFound',\n    title: 'notFound',\n    meta: {},\n    path: notFoundPath,\n    component: NotFound,\n    _component: NotFound,\n    _relativePath: notFoundPath,\n    _level: 0,\n  };\n  authInputRoutes.push(notFoundPage);\n  flattenRoutes.push(notFoundPage);\n}\n\n// determine whether it is a react component\n// react Components are characterized by functions\n\nexport function isComponent (component: any): component is React.ComponentType<any> {\n  if (component instanceof Function) {\n    return true;\n  }\n  return false;\n}\n\nexport function isString (str: any): str is string {\n  if (typeof str === 'string') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * 1、To support ts, users are prompted when writing code\n * 2、Modify global configuration\n * 3、Add '_isDefined' attribute, Used by MRouter to defined whether the object has been called defineRouterConfig\n * @param routerConfig\n * @returnsRouterBaseConfigI\n */\nlet _defineId = 0;\nexport function defineRouterConfig (routerConfig: RouterConfigI): RouterBaseConfigI {\n  const { LoadingComponent, ..._config } = routerConfig;\n  _defineId = _defineId + 1;\n  if (LoadingComponent) {\n    setChangeable({LoadingComponent})\n  }\n  /** add '_isDefined' attribute */\n  const config: RouterBaseConfigI = {..._config, _isDefined: true, _defineId: _defineId}\n  return config;\n}\n\ninterface ArrayLike<T> extends Array<T> {\n  readonly length: number\n  readonly [n: number]: T\n}\ntype Many<T> = T | ReadonlyArray<T>;\n\nexport function flattenArr<T> (ary: ArrayLike<Many<T>> | null | undefined): T[] {\n  if (!ary) {\n    return [];\n  }\n  return ary.reduce((pre: T[], cur) => {\n    return pre.concat(Array.isArray(cur) ? flattenArr(cur) : cur);\n  }, [] as T[]);\n}\n\n\n","import { NewStateI, NewStateQueryI } from \"./type\";\nimport { computedNewState } from \"./util\";\n\n// Initialized data to prevent double calculation\n// defineRouterConfig may be called multiple times in the same application\nlet initialStateMap = new Map<\n  number,\n  {\n    queryData: NewStateQueryI;\n    initialData: NewStateI;\n  }\n>();\n\nfunction getSameQueryData(\n  prevData: NewStateQueryI,\n  currentData: NewStateQueryI\n) {\n  return (\n    prevData.basename === currentData.basename &&\n    prevData.hasAuth === currentData.hasAuth &&\n    prevData.beforeEachMount === currentData.beforeEachMount &&\n    prevData.inputRoutes === currentData.inputRoutes && \n    prevData.permissionList === currentData.permissionList\n  );\n}\nfunction getInitialState(\n  currentQueryData: NewStateQueryI & { _defineId: number }\n): NewStateI {\n  const {\n    inputRoutes,\n    hasAuth,\n    permissionList,\n    beforeEachMount,\n    basename,\n    location,\n    _defineId\n  } = currentQueryData;\n  const prevData = initialStateMap.get(_defineId);\n  if (prevData) {\n    const isSameQueryData = getSameQueryData(\n      prevData.queryData,\n      currentQueryData\n    );\n    if (isSameQueryData) {\n      return prevData.initialData;\n    }\n  }\n  const _initialState = computedNewState({\n    inputRoutes,\n    permissionList,\n    hasAuth,\n    beforeEachMount,\n    basename,\n    location\n  });\n  initialStateMap.set(_defineId, {\n    queryData: currentQueryData,\n    initialData: _initialState\n  });\n  return _initialState;\n}\n\nexport default getInitialState;\n","import * as React from 'react';\nimport type { RouteHistoryObject } from '../type';\n\nconst MRouterHistoryContext = React.createContext<RouteHistoryObject>(null!);\nMRouterHistoryContext.displayName = 'MRouterHistoryContext';\n\nexport function useHistory () {\n  return React.useContext(MRouterHistoryContext).history;\n}\n\nexport function useRouteHooks () {\n  return React.useContext(MRouterHistoryContext).routeHooks;\n}\n\nexport function useRouteHooksRef () {\n  return React.useContext(MRouterHistoryContext).routeHooksRef;\n}\n\nexport function useHistoryMethods () {\n  return React.useContext(MRouterHistoryContext).historyMethods;\n}\n\nexport default MRouterHistoryContext;\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport type { BrowserRouterProps, Location } from \"react-router-dom\";\nimport { Router } from \"react-router-dom\";\nimport type { BrowserHistory } from \"@remix-run/router\";\nimport { createBrowserHistory } from \"@remix-run/router\";\nimport type { RouteCbI, RouteHistoryObject } from \"./type\";\nimport MRouterHistoryContext from \"./Context/MRouterHistoryContext\";\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport default function BrowserRouter({\n  basename,\n  children,\n  syncUpdateCurrentRoute\n}: BrowserRouterProps & {\n  syncUpdateCurrentRoute: (location: Location) => void;\n}) {\n  const historyRef = React.useRef<BrowserHistory>(null!);\n  const routeHooksRef = React.useRef<RouteCbI[]>(null!);\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window });\n    routeHooksRef.current = [];\n  }\n\n  const historyContext = useMemo(() => {\n    return {\n      history: historyRef.current as BrowserHistory,\n      routeHooks: routeHooksRef.current as RouteCbI[],\n      routeHooksRef,\n      historyMethods: {\n        push: historyRef.current.push,\n        replace: historyRef.current.replace,\n        go: historyRef.current.go\n      }\n    } as RouteHistoryObject;\n  }, []);\n\n  const history = historyRef.current;\n\n  const [state, setState] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n\n  React.useLayoutEffect(() => {\n    let mounted = true;\n    history.listen(routeData => {\n      const { location } = routeData;\n      if (!mounted) {\n        return;\n      }\n      unstable_batchedUpdates(() => {\n        setState(routeData);\n        syncUpdateCurrentRoute(location);\n      });\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [history, syncUpdateCurrentRoute]);\n  return (\n    <MRouterHistoryContext.Provider value={historyContext}>\n      <Router\n        basename={basename}\n        location={state.location}\n        navigationType={state.action}\n        navigator={history}\n      >\n        {children}\n      </Router>\n    </MRouterHistoryContext.Provider>\n  );\n}\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport type { BrowserRouterProps, Location } from \"react-router-dom\";\nimport { Router } from \"react-router-dom\";\nimport { HashHistory, createHashHistory } from \"@remix-run/router\";\nimport type { RouteCbI, RouteHistoryObject } from \"./type\";\nimport MRouterHistoryContext from \"./Context/MRouterHistoryContext\";\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport default function HashRouter({\n  basename,\n  children,\n  syncUpdateCurrentRoute\n}: BrowserRouterProps & {\n  syncUpdateCurrentRoute: (location: Location) => void;\n}) {\n  const historyRef = React.useRef<HashHistory>(null!);\n  const routeHooksRef = React.useRef<RouteCbI[]>(null!);\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window });\n    routeHooksRef.current = [];\n  }\n  const historyContext = useMemo(() => {\n    return {\n      history: historyRef.current as HashHistory,\n      routeHooks: routeHooksRef.current as RouteCbI[],\n      routeHooksRef,\n      historyMethods: {\n        push: historyRef.current.push,\n        replace: historyRef.current.replace,\n        go: historyRef.current.go\n      }\n    } as RouteHistoryObject;\n  }, []);\n\n  const history = historyRef.current;\n\n  const [state, setState] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n\n  React.useLayoutEffect(() => {\n    let mounted = true;\n    history.listen(routeData => {\n      const { location } = routeData;\n      if (!mounted) {\n        return;\n      }\n      unstable_batchedUpdates(() => {\n        setState(routeData);\n        syncUpdateCurrentRoute(location);\n      });\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [history, syncUpdateCurrentRoute]);\n  return (\n    <MRouterHistoryContext.Provider value={historyContext}>\n      <Router\n        basename={basename}\n        location={state.location}\n        navigationType={state.action}\n        navigator={history}\n      >\n        {children}\n      </Router>\n    </MRouterHistoryContext.Provider>\n  );\n}\n","import type { NavigateOptions, To } from \"react-router-dom\";\nimport type { ParsedQuery } from \"query-string\";\nimport type { BrowserHistory, Location } from \"history\";\nimport * as React from \"react\";\n\nexport interface RouterBaseConfigI {\n  routes: RouteTypeI[];\n  basename?: string;\n  beforeEachMount?: BeforeEachMountI;\n  // the title of the document changes depending on the route switch\n  autoDocumentTitle?:\n    | boolean\n    | ((currentPathRoutes: RouteTypeExtendsI[]) => string);\n  _isDefined: boolean; // 是否是defined的\n  _defineId: number;\n}\n\nexport interface RouterConfigI extends Omit<RouterBaseConfigI, \"_isDefined\"> {\n  /** Lazy component or before next called */\n  LoadingComponent?: React.FunctionComponent<any>;\n  // beforeEachEnter?: BeforeEachEnterI;\n}\n\nexport type PermissionListType = string[];\nexport type CodeType = string | string[] | FnCodeType;\nexport type FnCodeType = (route: RouteTypeI) => boolean;\n\nexport type NextOptionsType =\n  | {\n      name?: string; // if name is configured, it will jump to the route corresponding to the route configuration\n      path?: string; // path\n    }\n  | React.ComponentType<any>; // iff a component is configured, it will be rendered\n\n// global route entry hook\nexport interface BeforeEachMountI {\n  (to: RouteTypeI, next: (nextOptionsType?: NextOptionsType) => void): void;\n}\n\nexport interface BeforeEachEnterI {\n  (to: RouteTypeI, next: (nextOptionsType?: NextOptionsType) => void): void;\n}\n\nexport enum RouteNavTypeEnum {\n  menu,\n  step\n}\nexport interface BeforeEnterI {\n  (\n    to: RouteTypeI | undefined,\n    next: (nextOptionsType?: NextOptionsType) => void\n  ): void;\n}\n\nexport interface BeforeLeaveI {\n  (\n    to: RouteTypeI | undefined,\n    from: RouteTypeI | undefined,\n    next: (ReplaceComponent?: any) => void\n  ): void;\n}\nexport interface RouteTypePropsI {\n  beforeEachMount?: BeforeEachMountI;\n  beforeEnter?: BeforeEnterI;\n  [prop: string]: any;\n}\n\nexport type RouteComponentType = React.LazyExoticComponent<any> | React.FC<any>;\nexport interface RouteTypeI {\n  name: string;\n  path: string;\n  component?: RouteComponentType;\n\n  beforeEnter?: BeforeEnterI;\n  beforeLeave?: BeforeLeaveI;\n  items?: RouteTypeI[]; // same level route\n  children?: RouteTypeI[]; // sub route of multi-level route, such as level-2 route under level-1 route\n  title?: string;\n  hidden?: boolean;\n  icon?: string;\n  code?: CodeType; // each menu item has a code, and the route code of the same menu item is the same\n  parentName?: string; // parent route name\n  fullscreen?: boolean; // if is true, the navigation bar will be hidden\n  props?: RouteTypePropsI;\n  redirect?: string;\n  type?: \"real\" | \"null\";\n\n  meta?: Record<string, any>; // some other information can be customized\n}\n\nexport interface RouteTypeInputI extends RouteTypeI {\n  _relativePath: string;\n  _level: number;\n  items?: RouteTypeInputI[];\n  children?: RouteTypeInputI[];\n  parent?: RouteTypeInputI;\n}\n\nexport interface RouteTypeExtendsI extends RouteTypeInputI {\n  parent?: RouteTypeExtendsI; // parent route name\n\n  meta: Record<string, any>; // some other information can be customized\n  items?: RouteTypeExtendsI[];\n  children?: RouteTypeExtendsI[];\n  _route?: RouteTypeInputI;\n  _component?: RouteComponentType;\n  _isHasAuth?: boolean; // true has permission; false: no permission\n  _itemsAndChildren?: RouteTypeExtendsI[];\n}\n\nexport enum RouterActionEnum {\n  UPDATE_INPUT_ROUTES = \"UPDATE_INPUT_ROUTES\",\n  UPDATE_CURRENT_ROUTE = \"UPDATE_CURRENT_ROUTE\",\n  UPDATE_STATE = \"UPDATE_STATE\",\n  ADD_ROUTES = \"ADD_ROUTES\",\n  REMOVE_ROUTES = \"REMOVE_ROUTES\",\n  UPDATE_ROUTES = \"UPDATE_ROUTES\"\n}\nexport interface Action {\n  type: RouterActionEnum;\n  payload?: any;\n  dispatch?: React.Dispatch<Action>;\n}\n\nexport interface MRouterStateI {\n  basename: string;\n\n  inputRoutes: RouteTypeInputI[];\n  authInputRoutes: RouteTypeExtendsI[];\n\n  routesMap: RoutesMapI;\n  flattenRoutes: RouteTypeExtendsI[];\n  currentRoute: RouteTypeExtendsI;\n  currentPathRoutes: RouteTypeExtendsI[];\n  prevRoute?: RouteTypeExtendsI;\n  permissionList?: string[];\n  hasAuth?: boolean;\n\n  beforeEachMount?: BeforeEachMountI;\n\n  _getNewStateByNewInputRoutes: (\n    _inputRoutes: RouteTypeInputI[]\n  ) => NewStateI;\n}\n\nexport interface AddRoutesI {\n  (routes: RouteTypeI[]): void;\n}\nexport interface RemoveRoutesI {\n  (routeNames: string[]): void;\n}\nexport interface UpdateRoutesI {\n  (routes: { routeName: string; routeData: Partial<RouteTypeI> }[]): void;\n}\nexport interface MRouterMethodsI {\n  addRoutes: AddRoutesI;\n  updateCurrentRoute: (currentRoute: RouteTypeExtendsI) => void;\n  removeRoutes: RemoveRoutesI;\n  updateRoutes: UpdateRoutesI;\n  // getStateByInputRoutes: (inputRoutes: RouteTypeInputI[]) => NewStateI;\n  [method: string]: any;\n}\nexport interface MRouterContextObject {\n  state: MRouterStateI;\n  // Some operation methods\n  methods: MRouterMethodsI;\n}\n\nexport interface RoutesBaseStateStruct {\n  routesMap: RoutesMapI;\n  routes: RouteTypeI[];\n  // flat routing\n  flattenRoutes: RouteTypeI[];\n  basename?: string;\n}\nexport interface ExtraNavigateOptions extends NavigateOptions {\n  params?: Record<string, any>; // url parameters of the route, for example: id\n  query?: Record<string, any>; // url query\n}\nexport interface NavigateFunction {\n  (to: To, options?: ExtraNavigateOptions): void;\n  (delta: number): void;\n}\nexport interface RoutesStateStruct extends RoutesBaseStateStruct {\n  navigate: NavigateFunction;\n  location: Location;\n  currentRoute: RouteTypeExtendsI;\n  authRoutes: RouteTypeExtendsI[];\n  query: ParsedQuery<string>;\n  params: Record<string, number | string>;\n}\n\nexport type RouteEvent = \"BeforeRouterLeave\" | \"AfterRouterEnter\";\n\nexport interface RouteCbI {\n  fn: BeforeLeaveI;\n  name: RouteEvent;\n  pathname: string;\n}\n\nexport interface RouteConfig {\n  path: string;\n  element?: React.ReactNode;\n  children?: RouteConfig[];\n}\n\nexport interface RouteHistoryObject {\n  history: BrowserHistory;\n  historyMethods: {\n    push(to: To, state?: any): void;\n    replace(to: To, state?: any): void;\n    go(delta: number): void;\n    back(): void;\n    forward(): void;\n  };\n  routeHooks: RouteCbI[];\n  routeHooksRef: React.MutableRefObject<RouteCbI[]>;\n}\nexport interface BaseRoutesMapI extends Record<string, RouteTypeExtendsI> {}\n\nexport type RoutesMapI = BaseRoutesMapI & {\n  __paramsRoutesMap: Record<string, RouteTypeExtendsI>;\n  __flattenRoutes: RouteTypeExtendsI[];\n};\n\nexport interface NewStateQueryI {\n  inputRoutes: RouteTypeInputI[];\n  permissionList?: string[];\n  hasAuth: boolean;\n  beforeEachMount?: BeforeEachMountI;\n  basename: string;\n  location: Location;\n}\n\nexport interface NewStateI {\n  authInputRoutes: RouteTypeExtendsI[];\n  flattenRoutes: RouteTypeExtendsI[];\n  routesMap: RoutesMapI;\n  currentRoute: RouteTypeExtendsI;\n  currentPathRoutes: RouteTypeExtendsI[];\n  beforeEachMount?: BeforeEachMountI | undefined;\n}\n","import type {\n  RouteTypeI,\n  MRouterStateI,\n  RouteTypeInputI,\n} from \"./type\";\nimport { cloneRoutes, computedNewState } from \"./util\";\n\nfunction newInputRoutesState(inputRoutes?: RouteTypeInputI[]): {\n  inputRoutes: RouteTypeInputI[];\n  routesMap: Record<string, RouteTypeInputI>;\n} {\n  const routesMap: Record<string, RouteTypeInputI> = {};\n  function _cloneInputRoutes(\n    inputRoutes?: RouteTypeInputI[],\n    parent?: RouteTypeInputI\n  ): RouteTypeInputI[] {\n    if (!inputRoutes) {\n      return [];\n    }\n    return inputRoutes.map(i => {\n      const _route: RouteTypeInputI = {\n        ...i,\n        items: [],\n        children: [],\n        parent: parent\n      };\n      _route.items = _cloneInputRoutes(i.items, _route);\n      _route.children = _cloneInputRoutes(i.children, _route);\n      routesMap[i.name] = _route;\n      return _route;\n    }, []);\n  }\n  return {\n    inputRoutes: _cloneInputRoutes(inputRoutes),\n    routesMap: routesMap\n  };\n}\n\n/**\n * add routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function addRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  const newRoutes = payload as RouteTypeI[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n\n  newRoutes.forEach(_route => {\n    const { path, name, parentName } = _route;\n\n    if (routesMap[path] || routesMap[name]) {\n      throw new Error(`新增路由 ${name} ${path} 已经存在，请修改`);\n    }\n\n    if (parentName) {\n      const _parentRoute = routesMap[parentName];\n      if (_parentRoute) {\n        const route = cloneRoutes({\n          routes: [_route],\n          parent: _parentRoute,\n          _level: _parentRoute._level! + 1\n        });\n        _parentRoute.items = _parentRoute.items || [];\n        _parentRoute.items.push(route[0]);\n        hasChange = true;\n      }\n    } else {\n      // 根路径插入\n      const route = cloneRoutes({\n        routes: [_route],\n        _level: 0\n      });\n      inputRoutes.push(route[0]);\n      hasChange = true;\n    }\n  });\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  }\n  return state;\n}\n/**\n * update routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function updateRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  // const { basename } = state;\n  const newRoutesPayload = payload as {\n    routeName: string;\n    routeData: Partial<RouteTypeI>;\n  }[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n  newRoutesPayload.forEach(({ routeName, routeData }) => {\n    const route = routesMap[routeName];\n    if (route) {\n      // 如果parent存在，则不是根节点\n      const parent = route.parent;\n\n      const _newRouteData = {\n        ...route,\n        ...routeData\n      };\n\n      const newRouteData = cloneRoutes({\n        routes: [_newRouteData],\n        parent,\n        _level: (parent?._level || 0) + 1,\n        basename: state.basename\n      });\n\n      if (!parent) {\n        Object.assign(route, newRouteData[0]);\n        hasChange = true;\n      }\n      if (parent && parent.items) {\n        parent.items.splice(parent.items.indexOf(route), 1, newRouteData[0]);\n        hasChange = true;\n      } else if (parent && parent.children) {\n        parent.children.splice(\n          parent.children.indexOf(route),\n          1,\n          newRouteData[0]\n        );\n        hasChange = true;\n      }\n    }\n  });\n\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  }\n  return state;\n}\n/**\n * remove routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function removeRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  const routeNames = payload as string[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n  routeNames.forEach(routeName => {\n    const _route = routesMap[routeName];\n    if (_route) {\n      // 如果parent存在，则不是根节点\n      const parent = _route.parent;\n      if (!parent) {\n        const index = inputRoutes.indexOf(_route);\n        if (index > -1) {\n          inputRoutes.splice(index, 1);\n          hasChange = true;\n        }\n      }\n      if (parent && parent.items) {\n        const index = parent.items.indexOf(_route);\n        if (index > -1) {\n          parent.items.splice(index, 1);\n          hasChange = true;\n        }\n      }\n    }\n  });\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  } else {\n    return state;\n  }\n}\n","import * as React from 'react';\nimport { addRoutesAction, removeRoutesAction, updateRoutesAction } from '../actions';\nimport type {\n  Action,\n  AddRoutesI,\n  RoutesMapI,\n  UpdateRoutesI,\n  MRouterContextObject,\n  MRouterStateI,\n} from '../type';\nimport {\n  RouterActionEnum\n} from '../type';\n\nconst MRouterContext = React.createContext<MRouterContextObject>({\n  state: {\n    inputRoutes: [],\n    authInputRoutes: [],\n    permissionList: [],\n    routesMap: {} as RoutesMapI,\n    flattenRoutes: [],\n  },\n  methods: {},\n} as unknown as MRouterContextObject);\nMRouterContext.displayName = 'MRouterContext';\n\nexport function MRouterReducer (state: MRouterStateI, action: Action): MRouterStateI {\n  const { type, payload } = action;\n  switch (type) {\n    case RouterActionEnum.ADD_ROUTES: {\n      return addRoutesAction(state, payload);\n    }\n    case RouterActionEnum.REMOVE_ROUTES: {\n      return removeRoutesAction(state, payload);\n    }\n    case RouterActionEnum.UPDATE_ROUTES: {\n      return updateRoutesAction(state, payload);\n    }\n    case RouterActionEnum.UPDATE_INPUT_ROUTES: {\n      return {\n        ...state,\n        inputRoutes: payload,\n      };\n    }\n    case RouterActionEnum.UPDATE_CURRENT_ROUTE: {\n      return {\n        ...state,\n        currentRoute: payload,\n      };\n    }\n    case RouterActionEnum.UPDATE_STATE: {\n      return {\n        ...state,\n        ...payload,\n      };\n    }\n    default: {\n      return { ...state };\n    }\n  }\n}\n\nexport function useRouterState (): MRouterStateI {\n  return React.useContext(MRouterContext).state;\n}\n\n/** Dynamically add routing method */\nexport function useAddRoutes (): AddRoutesI {\n  return React.useContext(MRouterContext).methods.addRoutes;\n}\n\nexport function useRemoveRoutes (): (routeNames: string[]) => void {\n  return React.useContext(MRouterContext).methods.removeRoutes;\n}\n\nexport function useUpdateRoutes (): UpdateRoutesI {\n  return React.useContext(MRouterContext).methods.updateRoutes;\n}\n\nexport default MRouterContext;\n","import * as React from 'react';\nimport {\n  Suspense,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n} from \"react\";\nimport type { Location, To } from \"react-router-dom\";\nimport {\n  generatePath,\n  useLocation,\n  useNavigate as useOldNavigate,\n  useParams,\n  useRoutes\n} from \"react-router\";\nimport { parse, stringify } from \"query-string\";\n\nimport {\n  cloneRoutes,\n  computedNewState,\n  executeEventCbs,\n  flattenArr,\n  getCurrentPathRoutes,\n  getCurrentRoute,\n  getCurrentRouteCbsByEvent,\n  getRealTo\n} from \"./util\";\nimport getInitialState from \"./getInitialState\";\nimport BrowserRouter from \"./BrowserRouter\";\nimport HashRouter from \"./HashRouter\";\nimport type {\n  BeforeLeaveI,\n  ExtraNavigateOptions,\n  RouteCbI,\n  RouteConfig,\n  RouteTypeExtendsI,\n  RouteTypeI,\n  RoutesMapI,\n  RoutesStateStruct,\n  RouterBaseConfigI,\n  RouteTypeInputI,\n  NewStateI\n} from \"./type\";\nimport { RouterActionEnum } from \"./type\";\nimport MRouterContext, {\n  MRouterReducer,\n  useAddRoutes,\n  useRemoveRoutes,\n  useRouterState,\n  useUpdateRoutes\n} from \"./Context/MRouterContext\";\nimport {\n  useHistory,\n  useHistoryMethods,\n  useRouteHooksRef\n} from \"./Context/MRouterHistoryContext\";\nimport { changeable } from \"./changeable\";\n\nexport type { RouterConfigI, RouteTypeI, RouteTypeExtendsI } from \"./type\";\n\nexport { defineRouterConfig } from \"./util\";\n\nconst DEFAULT_PERMISSION_LIST: string[] = [];\n\nfunction useBeforeLeave(fn: BeforeLeaveI): void {\n  const pathname = window.location.pathname;\n  const routeHooksRef = useRouteHooksRef();\n  useLayoutEffect(() => {\n    const hooks = routeHooksRef.current;\n    const routeHook = {\n      name: \"BeforeRouterLeave\",\n      pathname,\n      fn\n    } as RouteCbI;\n    hooks.push(routeHook);\n    return () => {\n      const index = hooks.indexOf(routeHook);\n      hooks.splice(index, 1);\n    };\n  }, [fn, pathname, routeHooksRef]);\n}\nexport interface NavigateFunction {\n  (to: To, options?: ExtraNavigateOptions): void;\n  (delta: number): void;\n}\n\nconst useNavigate = (): NavigateFunction => {\n  const oldNavigate = useOldNavigate();\n  const newCallback = useCallback(\n    (to, options: ExtraNavigateOptions = {}) => {\n      if (options?.params && typeof to === \"string\") {\n        to = generatePath(to, options.params);\n      }\n      // query写入地址栏\n      if (options?.query && typeof to === \"string\") {\n        let path = to;\n        const queryStr = stringify(options.query);\n        if (path.includes(\"?\")) {\n          path = `${path}&${queryStr}`;\n        } else {\n          path = `${path}?${queryStr}`;\n        }\n        to = path;\n      }\n\n      return oldNavigate(to, options);\n    },\n    [oldNavigate]\n  );\n  return newCallback;\n};\n\nfunction useRouter(): RoutesStateStruct {\n  const location = useLocation();\n  const routesMapRef = useRef<RoutesMapI>({} as RoutesMapI);\n  const {\n    routesMap,\n    inputRoutes,\n    currentRoute,\n    flattenRoutes,\n    authInputRoutes,\n    basename\n  } = useRouterState();\n\n  if (routesMapRef.current !== routesMap) {\n    routesMapRef.current = routesMap;\n  }\n\n  const search = useMemo(() => {\n    return parse(location.search);\n  }, [location.search]);\n\n  const routerParams = useParams();\n\n  const newNavigate = useNavigate();\n\n  return {\n    navigate: newNavigate,\n    routesMap,\n    query: search,\n    params: routerParams as Record<string, string | number>,\n    routes: inputRoutes,\n    authRoutes: authInputRoutes,\n    currentRoute,\n    flattenRoutes,\n    location,\n    basename\n  };\n}\n\ninterface MRouterContextProviderI {\n  permissionList?: string[];\n  hasAuth: boolean;\n  routerConfig: RouterBaseConfigI;\n  children?: (children: React.ReactNode) => React.ReactNode;\n}\n\ninterface InternalMRouterContextProviderRef {\n  updateCurrentRoute: (location: Location) => void;\n}\n\nconst InternalMRouterContextProvider: React.ForwardRefRenderFunction<\n  InternalMRouterContextProviderRef,\n  MRouterContextProviderI\n> = (\n  { permissionList = DEFAULT_PERMISSION_LIST, routerConfig, hasAuth, children },\n  ref\n) => {\n  const history = useHistory();\n  const location = useLocation();\n  const locationRef = useRef(location);\n\n  const oldHistoryMethods = useHistoryMethods();\n  const routeHooksRef = useRouteHooksRef();\n\n  const {\n    routes = [],\n    basename = \"/\",\n    beforeEachMount,\n    autoDocumentTitle = false\n  } = routerConfig;\n\n  const inputRoutes = useMemo(() => {\n    return cloneRoutes({\n      routes,\n      basename\n    });\n  }, [basename, routes]);\n\n  const inputRoutesRef = useRef(inputRoutes);\n\n  const [initialState] = useState(\n    getInitialState({\n      inputRoutes,\n      permissionList,\n      hasAuth,\n      beforeEachMount,\n      basename,\n      location: locationRef.current,\n      _defineId: routerConfig._defineId\n    })\n  );\n\n  const getNewStateByNewInputRoutesRef = useRef<\n    (_inputRoutes: RouteTypeInputI[]) => NewStateI\n  >(null!);\n  const _getNewStateByNewInputRoutes = useCallback(\n    (_inputRoutes: RouteTypeInputI[]) => {\n      return computedNewState({\n        inputRoutes: _inputRoutes,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        basename,\n        location: location\n      });\n    },\n    [basename, beforeEachMount, hasAuth, location, permissionList]\n  );\n  getNewStateByNewInputRoutesRef.current = _getNewStateByNewInputRoutes;\n\n  // initialization\n  const [state, dispatch] = useReducer(MRouterReducer, {\n    ...initialState,\n    inputRoutes,\n    permissionList,\n    hasAuth,\n    basename,\n    _getNewStateByNewInputRoutes: getNewStateByNewInputRoutesRef.current\n  });\n\n  /**\n   * listen router change，set currentRoute\n   *  Put the updated currentRoute in history listen updates in batches to reduce the number of updates\n   */\n  useImperativeHandle(ref, () => {\n    return {\n      updateCurrentRoute(location) {\n        const { pathname } = location;\n        const prevRoute = state.currentRoute;\n        const currentRoute = getCurrentRoute(pathname, state.routesMap);\n\n        let currentPathRoutes = state.currentPathRoutes;\n        if (currentRoute !== state.currentRoute) {\n          currentPathRoutes = getCurrentPathRoutes(currentRoute);\n        }\n        dispatch({\n          type: RouterActionEnum.UPDATE_STATE,\n          payload: {\n            currentRoute,\n            currentPathRoutes,\n            prevRoute\n          }\n        });\n      }\n    };\n  });\n\n  useLayoutEffect(() => {\n    // filter routes without permission\n    // used to judge initialization or update. If they are equal, only currentRoute needs to be calculated\n    if (\n      state.permissionList === permissionList &&\n      hasAuth === state.hasAuth &&\n      state.inputRoutes === inputRoutes &&\n      state.beforeEachMount === beforeEachMount\n    ) {\n      return;\n    }\n    // if inputRoutes change, the incoming inputRoutes shall prevail\n    let _inputRoutes = state.inputRoutes;\n    if (\n      inputRoutesRef.current === inputRoutes &&\n      state.permissionList === permissionList &&\n      hasAuth === state.hasAuth &&\n      state.beforeEachMount === beforeEachMount\n    ) {\n      // Equal, indicating that state.inputRoutes has changed, is add remove and update routes\n      return;\n    } else {\n      // if not Equal, record the value of inputRoutes for next comparison\n      inputRoutesRef.current = inputRoutes;\n      _inputRoutes = inputRoutes;\n    }\n\n    const {\n      authInputRoutes,\n      flattenRoutes,\n      routesMap,\n      currentRoute,\n      currentPathRoutes\n    } = computedNewState({\n      inputRoutes: _inputRoutes,\n      permissionList,\n      hasAuth,\n      beforeEachMount,\n      basename,\n      location\n    });\n\n    dispatch({\n      type: RouterActionEnum.UPDATE_STATE,\n      payload: {\n        permissionList,\n        authInputRoutes,\n        routesMap,\n        flattenRoutes,\n        currentRoute,\n        currentPathRoutes,\n        basename,\n        beforeEachMount\n      }\n    });\n  }, [\n    state.inputRoutes,\n    inputRoutes,\n    permissionList,\n    state.permissionList,\n    hasAuth,\n    state.hasAuth,\n    basename,\n    beforeEachMount,\n    location\n  ]);\n\n  // auto setting document.title\n  useEffect(() => {\n    if (!autoDocumentTitle) {\n      return;\n    }\n    let title = \"\";\n    if (typeof autoDocumentTitle === \"boolean\") {\n      title = state.currentPathRoutes\n        .map(i => {\n          return i.title;\n        })\n        .join(\"-\");\n    } else if (typeof autoDocumentTitle === \"function\") {\n      title = autoDocumentTitle(state.currentPathRoutes);\n    }\n    document.title = title;\n  }, [autoDocumentTitle, state.currentPathRoutes]);\n\n  const allExecuteEventCbs = useCallback(\n    (historyCb: () => void, to?: To) => {\n      if (typeof to !== \"string\") {\n        to = to?.pathname;\n      }\n      const pathname = window.location.pathname;\n      const beforeRouterLeaveCbs = getCurrentRouteCbsByEvent(\n        \"BeforeRouterLeave\",\n        pathname,\n        routeHooksRef.current\n      );\n      if (state.currentRoute?.beforeLeave) {\n        beforeRouterLeaveCbs.unshift({\n          name: \"BeforeRouterLeave\",\n          pathname: state.currentRoute.path,\n          fn: state.currentRoute.beforeLeave as BeforeLeaveI\n        });\n      }\n      if (beforeRouterLeaveCbs.length) {\n        executeEventCbs({\n          to: getCurrentRoute(to as string, state.routesMap),\n          from: getCurrentRoute(pathname, state.routesMap),\n          callbacks: beforeRouterLeaveCbs,\n          finish: () => {\n            return historyCb();\n          }\n        });\n      } else {\n        return historyCb();\n      }\n    },\n    [\n      routeHooksRef,\n      state.currentRoute.beforeLeave,\n      state.currentRoute.path,\n      state.routesMap\n    ]\n  );\n\n  useLayoutEffect(() => {\n    // Intercept the methods used in history in useNavigator\n    history.go = (delta: number) => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.go(delta);\n        // history.go = oldHistoryMethods.go;\n        return res;\n      });\n    };\n    history.push = (to: To, state?: any) => {\n      to = getRealTo(to);\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.push(to, state);\n        // history.push = oldHistoryMethods.push;\n        return res;\n      }, to);\n    };\n\n    history.replace = (to: To, state?: any) => {\n      to = getRealTo(to);\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.replace(to, state);\n        // history.replace = oldHistoryMethods.replace;\n        return res;\n      }, to);\n    };\n\n    history.back = () => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.back();\n        // history.back = oldHistoryMethods.back;\n        return res;\n      });\n    };\n\n    history.forward = () => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.forward();\n        // history.forward = oldHistoryMethods.forward;\n        return res;\n      });\n    };\n  }, [allExecuteEventCbs, history, oldHistoryMethods]);\n\n  const addRoutes = useCallback((newRoutes: RouteTypeI[]) => {\n    dispatch({\n      type: RouterActionEnum.ADD_ROUTES,\n      payload: newRoutes\n    });\n  }, []);\n\n  const removeRoutes = useCallback((routeNames: string[]) => {\n    dispatch({\n      type: RouterActionEnum.REMOVE_ROUTES,\n      payload: routeNames\n    });\n  }, []);\n\n  const updateRoutes = useCallback(\n    (routes: { routeName: string; routeData: Partial<RouteTypeI> }[]) => {\n      dispatch({\n        type: RouterActionEnum.UPDATE_ROUTES,\n        payload: routes\n      });\n    },\n    []\n  );\n\n  const updateCurrentRoute = useCallback((currentRoute: RouteTypeExtendsI) => {\n    if (!currentRoute) {\n      return;\n    }\n    dispatch({\n      type: RouterActionEnum.UPDATE_CURRENT_ROUTE,\n      payload: currentRoute\n    });\n  }, []);\n\n  const routesConfig = useMemo(() => {\n    function _computeRoutesConfig(routes: RouteTypeExtendsI[]) {\n      const _routes = routes.map(route => {\n        let _routeConfig: RouteConfig | undefined;\n        let _itemsRouteConfig: RouteConfig[] = [];\n        const {\n          _component: Component,\n          path,\n          items,\n          children,\n          _isHasAuth,\n          props\n        } = route;\n        if (Component) {\n          const LoadingCmp = changeable.LoadingComponent;\n          if (!_isHasAuth) {\n            /** Without permission, the child also has no permission */\n            return {\n              path: path.endsWith(\"*\") ? path : `${path}/*`,\n              element: (\n                <Suspense fallback={<LoadingCmp />}>\n                  <Component {...props} />\n                </Suspense>\n              )\n            } as RouteConfig;\n          }\n          _routeConfig = {\n            path,\n            element: (\n              <Suspense fallback={LoadingCmp}>\n                <Component {...props} />\n              </Suspense>\n            )\n          } as RouteConfig;\n          if (children) {\n            _routeConfig.children = _computeRoutesConfig(children);\n          }\n          if (items) {\n            _itemsRouteConfig = _computeRoutesConfig(items);\n          }\n        }\n\n        const nextRoutes = [_routeConfig, ..._itemsRouteConfig].filter(i => {\n          return i !== undefined;\n        }) as RouteConfig[];\n        return nextRoutes;\n      });\n      return flattenArr(_routes);\n    }\n    const _routesConfig = _computeRoutesConfig(state.authInputRoutes);\n    return _routesConfig;\n  }, [state.authInputRoutes]);\n\n  const routesChildren = useRoutes(routesConfig);\n\n  const renders = useMemo(() => {\n    return children ? children(routesChildren) : routesChildren;\n  }, [children, routesChildren]);\n\n  return (\n    <MRouterContext.Provider\n      value={{\n        state,\n        methods: {\n          addRoutes,\n          updateCurrentRoute,\n          removeRoutes,\n          updateRoutes\n        }\n      }}\n    >\n      {renders}\n    </MRouterContext.Provider>\n  );\n};\n\nconst MRouterContextProvider = React.forwardRef(InternalMRouterContextProvider);\n\nMRouterContextProvider.displayName = \"MRouterContextProvider\";\n\ninterface MRouterPropsI {\n  permissionList?: string[];\n  wrapComponent?: React.FunctionComponent<any>;\n  hasAuth?: boolean;\n  routerConfig: RouterBaseConfigI;\n  children?: (children: React.ReactNode) => React.ReactNode;\n}\ninterface CoreRouterPropsI extends MRouterPropsI {\n  RouterComponent: typeof BrowserRouter | typeof HashRouter;\n}\nconst CoreRouter: React.FC<CoreRouterPropsI> = ({\n  permissionList,\n  wrapComponent: WrapComponent,\n  hasAuth = true,\n  routerConfig,\n  children,\n  RouterComponent\n}) => {\n  const syncUpdateCurrentRouteRef = useRef<{\n    updateCurrentRoute: (location: Location) => void;\n  }>(null!);\n  const syncUpdateCurrentRoute = useCallback(location => {\n    syncUpdateCurrentRouteRef.current?.updateCurrentRoute?.(location);\n  }, []);\n\n  if (__DEV__) {\n    /** Determine whether routerConfig has ‘_isDefined’ attribute */\n    if (!routerConfig._isDefined) {\n      console.error(\n        `The routerConfig does not call defineRouterConfig definition, You should use 'const routerConfig = defineRouterConfig({...})'`\n      );\n    }\n    /** Judge incoming 'WrapComponent' and 'children' */\n    if (WrapComponent && children) {\n      console.warn(\n        `MRouter attributes 'children' and 'WrapComponent' are optional attributes. If both exist, children will be used`\n      );\n    }\n    if (children && typeof children !== \"function\") {\n      console.error(\n        'MRoute attributes children needs to be a function, not a function at present  \"%s\"',\n        children\n      );\n    }\n  }\n\n  const _children = useMemo(() => {\n    if (children && typeof children === \"function\") {\n      return children;\n    }\n    if (WrapComponent) {\n      WrapComponent.displayName = \"WrapComponent\";\n      return function wrapComponent(children: React.ReactNode) {\n        return <WrapComponent>{children}</WrapComponent>;\n      };\n    }\n  }, [WrapComponent, children]);\n\n  return (\n    <RouterComponent syncUpdateCurrentRoute={syncUpdateCurrentRoute}>\n      <MRouterContextProvider\n        routerConfig={routerConfig}\n        permissionList={permissionList}\n        hasAuth={hasAuth}\n        ref={syncUpdateCurrentRouteRef}\n      >\n        {_children}\n      </MRouterContextProvider>\n    </RouterComponent>\n  );\n};\n\nconst MRouter: React.FC<MRouterPropsI> = props => {\n  return <CoreRouter {...props} RouterComponent={BrowserRouter} />;\n};\n\nconst MHRouter: React.FC<MRouterPropsI> = props => {\n  return <CoreRouter {...props} RouterComponent={HashRouter} />;\n};\n\nexport {\n  MRouter,\n  MHRouter,\n  useAddRoutes,\n  useRemoveRoutes,\n  useUpdateRoutes,\n  useBeforeLeave,\n  useRouter,\n  useHistory,\n  useNavigate\n};\n"],"names":["PageConfig","title","img","NoAuth","code","config","React","display","justifyContent","alignItems","background","height","flexDirection","borderRadius","color","lineHeight","textAlign","marginTop","displayName","NameRedirect","name","component","Component","routesMap","currentRoute","useRouter","targetRoute","Navigate","path","Spin","tip","LoadingCmp","changeable","LoadingComponent","setChangeable","options","Object","entries","forEach","key","value","getComponent","ReplaceComponent","isComponent","isString","Redirect","GeneratorHookCom","beforeEnter","beforeEachMount","CurrentComponent","setCurrentComponent","useState","undefined","useLayoutEffect","isActive","EachReplaceComponent","enterOptions","EnterReplaceComponent","NotFound","incrementKey","getIncrementName","getWholePath","basename","parentPath","startsWith","endsWith","slice","cloneRoutes","_routeConfig","routes","parent","_level","_cloneRoutes","_routes","map","_route","items","children","resets","wholePath","newRoute","getValidPathname","_relativePath","computedNewState","inputRoutes","permissionList","hasAuth","location","authInputRoutes","computeRoutesConfig","flattenRoutes","flattenRoutesFn","mixinNotFoundPage","routesMapFn","getCurrentRoute","pathname","currentPathRoutes","getCurrentPathRoutes","arr","all","reduce","prev","nextRoute","Array","isArray","concat","_routeMap","Error","includes","_path","replace","__paramsRoutesMap","__flattenRoutes","window","paths","keys","pathIndex","length","pathPattern","RegExp","match","i","filter","longerPath","pathStartMarkTransform","_isHasAuth","meta","pathRoute","unshift","executeEventCbs","option","to","from","callbacks","finish","executeNextCb","cbIndex","nextCb","fn","getIsHasAuthByStrCode","getIsHasAuthByFnCode","route","getIsHasAuth","some","_code","Function","redirect","type","other","_children","_items","props","isHasAuth","noAuthItems","hidden","_component","returnRoute","_itemsAndChildren","redirectPath","handleRedirectPath","getCurrentRouteCbsByEvent","routeEvent","routeHooks","getRealTo","childRoute","notFoundPath","hasNotFoundPage","notFoundPage","push","str","_defineId","defineRouterConfig","routerConfig","_config","_isDefined","flattenArr","ary","pre","cur","initialStateMap","Map","getSameQueryData","prevData","currentData","getInitialState","currentQueryData","get","isSameQueryData","queryData","initialData","_initialState","set","MRouterHistoryContext","createContext","useHistory","useContext","history","useRouteHooksRef","routeHooksRef","useHistoryMethods","historyMethods","BrowserRouter","syncUpdateCurrentRoute","historyRef","useRef","current","createBrowserHistory","historyContext","useMemo","go","state","setState","action","mounted","listen","routeData","unstable_batchedUpdates","Router","HashRouter","createHashHistory","RouteNavTypeEnum","RouterActionEnum","newInputRoutesState","_cloneInputRoutes","addRoutesAction","payload","hasChange","newRoutes","parentName","_parentRoute","newState","_getNewStateByNewInputRoutes","updateRoutesAction","newRoutesPayload","routeName","_newRouteData","newRouteData","assign","splice","indexOf","removeRoutesAction","routeNames","index","MRouterContext","methods","MRouterReducer","ADD_ROUTES","REMOVE_ROUTES","UPDATE_ROUTES","UPDATE_INPUT_ROUTES","UPDATE_CURRENT_ROUTE","UPDATE_STATE","useRouterState","useAddRoutes","addRoutes","useRemoveRoutes","removeRoutes","useUpdateRoutes","updateRoutes","DEFAULT_PERMISSION_LIST","useBeforeLeave","hooks","routeHook","useNavigate","oldNavigate","useOldNavigate","newCallback","useCallback","params","generatePath","query","queryStr","stringify","useLocation","routesMapRef","search","parse","routerParams","useParams","newNavigate","navigate","authRoutes","InternalMRouterContextProvider","ref","locationRef","oldHistoryMethods","autoDocumentTitle","inputRoutesRef","initialState","getNewStateByNewInputRoutesRef","_inputRoutes","dispatch","useReducer","useImperativeHandle","updateCurrentRoute","prevRoute","useEffect","join","document","allExecuteEventCbs","historyCb","beforeRouterLeaveCbs","beforeLeave","delta","res","back","forward","routesConfig","_computeRoutesConfig","_itemsRouteConfig","element","Suspense","nextRoutes","_routesConfig","routesChildren","useRoutes","renders","MRouterContextProvider","forwardRef","CoreRouter","wrapComponent","WrapComponent","RouterComponent","syncUpdateCurrentRouteRef","console","error","warn","MRouter","MHRouter"],"mappings":"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"}