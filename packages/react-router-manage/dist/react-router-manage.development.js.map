{"version":3,"file":"react-router-manage.development.js","sources":["../src/components/NoAuth/index.tsx","../src/components/NameRedirect/index.tsx","../src/components/Spin/index.tsx","../src/changeable.tsx","../src/GeneratorHookCom.tsx","../src/components/NotFound/index.tsx","../src/util.tsx","../src/getInitialState.ts","../src/Context/MRouterHistoryContext.tsx","../src/BrowserRouter.tsx","../src/HashRouter.tsx","../src/type.ts","../src/actions.ts","../src/Context/MRouterContext.tsx","../src/index.tsx"],"sourcesContent":["import * as React from 'react';\n\nconst PageConfig = {\n  '401': {\n    title: '无权限查看该页面',\n    img: '//ysf.qiyukf.net/yx/9c9ce7793b3c0657da5d80e740a89681',\n  },\n  '404': {\n    title: '页面不存在',\n    img: 'https://ysf.nosdn.127.net/ysh/6be90dea7806767fe65e7b48982b7a61',\n  },\n} as Record<string, {title: string; img: string}>;\n\nconst NoAuth: React.FC<{ code?: string }> = ({ code = '401' }) => {\n  const config = PageConfig[code];\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        background: 'white',\n        height: '100%',\n        flexDirection: 'column',\n        borderRadius: 8,\n      }}\n    >\n      <img alt={config.title} width={200} src={config?.img} />\n      <div\n        style={{ color: '#666666', lineHeight: '22px', textAlign: 'center', marginTop: 16 }}\n      >\n        {config.title}\n      </div>\n    </div>\n  );\n};\n\nNoAuth.displayName = 'NoAuth';\n\nexport default NoAuth;\n","import * as React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useRouter } from '../../index';\n\nconst NameRedirect: React.FC<{ name: string; component?: React.ComponentType<any> }> = ({ name, component: Component }) => {\n  const { routesMap, currentRoute } = useRouter();\n\n  const targetRoute = routesMap[name];\n\n  if (!targetRoute) {\n    if (__DEV__) {\n      Error(`routesMap.${name} 路由不存在`);\n    }\n  }\n\n  if (name === currentRoute.name) {\n    if (Component) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      return <Component />;\n    }\n    return <></>;\n  }\n\n  return <Navigate to={targetRoute.path || ''} />;\n};\n\nexport default NameRedirect;\n","import * as React from 'react';\nconst Spin:React.FC<{tip: string}> = ({tip = \"加载中\"})  => {\n  return <div>{tip}</div>;\n}\n\nexport default Spin;\n","import * as React from 'react';\nimport Spin from './components/Spin'\nconst LoadingCmp = () => <><Spin tip=\"应用正在加载中…\" /></>;\n\n/**\n * LoadingComponent Define the Suspense component's fallback and beforeEnter when a component is loaded, \n * and the state component when calling next\n */\ninterface ChangeableI {\n    LoadingComponent: React.FunctionComponent<any>\n}\n\nconst changeable: ChangeableI = {\n    LoadingComponent: LoadingCmp,\n}\n\nfunction setChangeable(options: Partial<ChangeableI>) {\n    Object.entries(options).forEach(([key , value]) => {\n        changeable[key as keyof ChangeableI] = value\n    })\n}\n\nexport {\n    changeable,\n    setChangeable\n}","import * as React from \"react\";\nimport { useLayoutEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport NameRedirect from \"./components/NameRedirect\";\nimport type {\n  BeforeEachMountI,\n  BeforeEnterI,\n  NextOptionsType,\n  RouteTypeI\n} from \"./type\";\n\nimport { useRouter } from \"./index\";\nimport { isComponent, isString } from \"./util\";\nimport { changeable } from \"./changeable\";\n\nfunction getComponent(\n  options?: NextOptionsType,\n  Component?: React.ComponentType\n) {\n  let ReplaceComponent: React.ComponentType<any> | undefined;\n  if (!options) {\n    return ReplaceComponent;\n  }\n  // if a component is passed in\n  if (isComponent(options)) {\n    ReplaceComponent = options as React.ComponentType<any>;\n    // @ts-ignore\n  } else if (isString(options.path)) {\n    // if there is path, path is preferred\n    ReplaceComponent = function Redirect() {\n      // @ts-ignore\n      return <Navigate to={options.path!} />;\n    };\n     // @ts-ignore\n  } else if (isString(options.name)) {\n    // if there is no path, use name\n    ReplaceComponent = function Redirect() {\n      // @ts-ignore\n      return <NameRedirect name={options.name!} component={Component} />;\n    };\n  }\n  return ReplaceComponent;\n}\n\nexport const GeneratorHookCom: React.FC<{\n  beforeEnter?: BeforeEnterI;\n  beforeEachMount?: BeforeEachMountI;\n  Component: any;\n  _route: RouteTypeI;\n}> = ({ beforeEnter, Component, beforeEachMount }) => {\n  /**\n   * since setCurrentComponent(Component) Component may be a function\n   * react by default, if the preState is a function, the function will be executed and an error will occur\n   * So here we put Component into an object\n   */\n  const [CurrentComponent, setCurrentComponent] = useState<{ Component: any }>({\n    Component: undefined\n  });\n  const { currentRoute } = useRouter();\n  useLayoutEffect(() => {\n    // 是否激活状态(未卸载)\n    let isActive = true;\n    // 全局的\n    if (beforeEachMount) {\n      beforeEachMount(currentRoute, options => {\n        if (!isActive) {\n          return;\n        }\n\n        // global\n        const EachReplaceComponent = getComponent(options, Component);\n        if (beforeEnter) {\n          // local\n          beforeEnter(currentRoute, enterOptions => {\n            if (!isActive) {\n              return;\n            }\n            const EnterReplaceComponent = getComponent(\n              enterOptions,\n              EachReplaceComponent || Component\n            );\n            // if the Component is passed in next in beforeEnter, the beforeEnter shall prevail\n\n            // Otherwise, beforeEachBeforeMount shall prevail\n            setCurrentComponent({\n              Component:\n                EnterReplaceComponent || EachReplaceComponent || Component\n            });\n          });\n        } else {\n          setCurrentComponent({ Component: EachReplaceComponent || Component });\n        }\n      });\n    } else {\n      // local\n      if (beforeEnter) {\n        beforeEnter(currentRoute, enterOptions => {\n          if (!isActive) {\n            return;\n          }\n          const EnterReplaceComponent = getComponent(enterOptions, Component);\n          setCurrentComponent({\n            Component: EnterReplaceComponent || Component\n          });\n        });\n      }\n    }\n    return () => {\n      isActive = false;\n    };\n  }, [Component, currentRoute, beforeEnter, beforeEachMount]);\n  const LoadingCmp = changeable.LoadingComponent;\n  return CurrentComponent.Component ? (\n    <CurrentComponent.Component />\n  ) : (\n    <LoadingCmp />\n  );\n};\n\nexport default GeneratorHookCom;\n","import * as React from 'react';\nimport NoAuth from '../NoAuth';\n\nconst NotFound: React.FC = () => {\n  return <NoAuth code=\"404\" />;\n};\n\nexport default NotFound;\n","import * as React from 'react';\nimport type { To } from 'react-router';\nimport { Navigate } from 'react-router';\nimport NoAuth from './components/NoAuth';\nimport type {\n  BeforeEachMountI,\n  CodeType,\n  FnCodeType,\n  PermissionListType,\n  RouteCbI,\n  RouteEvent,\n  RouteTypeExtendsI,\n  RouteTypeI,\n  RouteTypeInputI,\n  RouteTypePropsI,\n  RouterConfigI,\n  RoutesMapI,\n  RouterBaseConfigI,\n  NewStateQueryI,\n  NewStateI,\n} from './type';\nimport GeneratorHookCom from './GeneratorHookCom';\nimport NotFound from './components/NotFound';\nimport { setChangeable } from './changeable';\n\nlet incrementKey = 1;\nconst getIncrementName = () => {\n  const name = `__routerName${incrementKey}`;\n  incrementKey = incrementKey + 1;\n  return name;\n};\n\nfunction getWholePath (path: string, basename = '/', parentPath?: string): string {\n  if (path.startsWith(basename)) {\n    return path;\n  }\n  // 根路径\n  if (path === basename) {\n    return basename;\n  }\n\n  if (path.startsWith('/')) {\n    if (basename.endsWith('/')) {\n      return `${basename}${path.slice(1)}`;\n    }\n    return `${basename}${path}`;\n  }\n\n  if (parentPath) {\n    return getWholePath(path, parentPath);\n  }\n\n  if (basename.endsWith('/')) {\n    return `${basename}${path}`;\n  }\n  return `${basename}/${path}`;\n}\n\nexport function cloneRoutes (_routeConfig: {\n  routes: RouteTypeI[]\n  parent?: RouteTypeInputI\n  basename?: string\n  _level?: number\n}): RouteTypeInputI[] {\n  const { routes, parent, basename = '/', _level = 1 } = _routeConfig;\n  if (!routes) {\n    return [];\n  }\n  if (!Array.isArray(routes)) {\n    Error('MRouter route prop need to type Array<RouteTypeI>');\n  }\n  function _cloneRoutes (_routes: RouteTypeI[], parent?: RouteTypeInputI, _level = 1): RouteTypeInputI[] {\n    return _routes.map(_route => {\n      const { path, items, children, ...resets } = _route;\n      const wholePath = getWholePath(path, basename, parent?.path);\n      const newRoute: RouteTypeInputI = {\n        ...resets,\n        path: getValidPathname(wholePath),\n        parent,\n        _level,\n        _relativePath: path,\n      };\n      if (items) {\n        newRoute.items = _cloneRoutes(items, newRoute, _level + 1);\n      }\n      if (children) {\n        newRoute.children = _cloneRoutes(children, newRoute, _level + 1);\n      }\n\n      return newRoute;\n    });\n  }\n  return _cloneRoutes(routes, parent, _level);\n}\n\n/**\n *cCalculate some state data\n * @param inputRoutes\n * @param permissionList\n * @returns\n */\nexport function computedNewState (config: NewStateQueryI):NewStateI {\n  const { inputRoutes, permissionList, hasAuth, beforeEachMount, basename, location } = config;\n  const authInputRoutes = computeRoutesConfig({\n    routes: inputRoutes,\n    permissionList,\n    hasAuth,\n    beforeEachMount,\n  });\n  const flattenRoutes = flattenRoutesFn(authInputRoutes, undefined, true);\n  // mixin into the notFound page\n  mixinNotFoundPage(flattenRoutes, basename, authInputRoutes);\n  const routesMap = routesMapFn(flattenRoutes);\n  const currentRoute = getCurrentRoute(location.pathname, routesMap);\n  const currentPathRoutes = getCurrentPathRoutes(currentRoute);\n \n  return {\n    authInputRoutes,\n    flattenRoutes,\n    routesMap,\n    currentRoute,\n    currentPathRoutes,\n    beforeEachMount,\n  };\n}\n\n/**\n * flatten the react router array recursively\n * whether all is true, includes sub routes\n */\nexport const flattenRoutesFn = (\n  arr: RouteTypeExtendsI[],\n  parent?: RouteTypeExtendsI,\n  all?: boolean\n): RouteTypeExtendsI[] => {\n  return arr.reduce((prev: RouteTypeExtendsI[], nextRoute: RouteTypeExtendsI) => {\n    if (parent) {\n      nextRoute.parent = parent;\n    }\n    if (Array.isArray(nextRoute.items) || Array.isArray(nextRoute.children)) {\n      let _routes = prev.concat(nextRoute);\n      if (Array.isArray(nextRoute.items)) {\n        _routes = _routes.concat(flattenRoutesFn(nextRoute.items, nextRoute, all));\n      }\n      if (Array.isArray(nextRoute.children) && all) {\n        _routes = _routes.concat(flattenRoutesFn(nextRoute.children, nextRoute, all));\n      }\n      return _routes;\n    } else {\n      return prev.concat(nextRoute);\n    }\n  }, []);\n};\n\n// name => mapping of route\nexport const routesMapFn = (flattenRoutes: RouteTypeExtendsI[]): RoutesMapI => {\n  const routesMap = flattenRoutes.reduce(\n    (_routeMap: RoutesMapI, nextRoute: RouteTypeExtendsI) => {\n      const { name, path } = nextRoute;\n      if (_routeMap[name] || _routeMap[path]) {\n\n        throw new Error(`route config name or path isn't unique, route name: \"${name}\", route path: \"${path}\"`);\n      }\n      // the route has params\n      // stored internally '__paramsRoutes' variable\n      if (path.includes(':')) {\n        const _path = path.replace(/:(\\w+)/g, () => {\n          return '([^\\\\/]+)';\n        });\n        _routeMap.__paramsRoutesMap[_path] = nextRoute;\n      }\n      _routeMap[name] = _routeMap[path] = nextRoute;\n      return _routeMap;\n    },\n    {\n      __paramsRoutesMap: {},\n      __flattenRoutes: [] as RouteTypeExtendsI[],\n    } as RoutesMapI\n  );\n  routesMap.__flattenRoutes = flattenRoutes;\n  return routesMap;\n};\n\n// convert '/a/b/c/' to '/a/b/c'\nfunction getValidPathname (pathname: string) {\n  if (!pathname) {\n    return pathname;\n  }\n  if (pathname.endsWith('/')) {\n    return pathname.slice(0, -1);\n  }\n  return pathname;\n}\n\n/** find the current route object through the path */\nexport function getCurrentRoute (\n  pathname = window.location.pathname,\n  routesMap: RoutesMapI\n) {\n  // console.log(routesMap);\n  // first look from the outermost routesMap\n  pathname = getValidPathname(pathname);\n  let currentRoute = routesMap[pathname];\n  // if can't find it, go to find to routesMap.__paramsRoutesMap\n  if (!currentRoute) {\n    const paths = Object.keys(routesMap.__paramsRoutesMap);\n    let pathIndex = 0;\n    while (!currentRoute && pathIndex < paths.length) {\n      const pathPattern = new RegExp(paths[pathIndex]);\n      if (pathname.match(pathPattern)) {\n        currentRoute = routesMap.__paramsRoutesMap[paths[pathIndex]];\n        break;\n      }\n      pathIndex = pathIndex + 1;\n    }\n  }\n  // TODO 找通配符的 后续优化\n  if (!currentRoute) {\n    // 有通配符的路径\n    const paths = routesMap.__flattenRoutes.map(i => i.path).filter(i => i.endsWith('*'));\n    // find the longest one\n    let longerPath = '';\n    paths.forEach(path => {\n      path = pathStartMarkTransform(path);\n      if (!pathname.startsWith(path)) {\n        return;\n      }\n      if (path in routesMap && path.length > longerPath.length) {\n        longerPath = path;\n      }\n      // 匹配 /a/b/c*\n      let _path = `${path}*`;\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n      // 匹配 /a/b/c/*\n      _path = `${path}/*`;\n\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n\n      // 匹配 /a/b/c*\n      _path = `${pathname}*`;\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n      // 匹配 /a/b/c/*\n      _path = `${pathname}/*`;\n\n      if (_path in routesMap && _path.length > longerPath.length) {\n        longerPath = _path;\n      }\n    });\n    if (longerPath) {\n      currentRoute = routesMap[longerPath];\n    }\n  }\n  // if (!currentRoute) {\n  //   // 找父级\n\n  // }\n  if (!currentRoute) {\n    // 默认404\n    currentRoute = {\n      name: '404',\n      path: pathname,\n      title: '404',\n      _isHasAuth: false,\n      _relativePath: '',\n      _level: 0,\n      meta: {},\n      component: () => {\n        return <NoAuth />;\n      },\n    };\n  }\n  return currentRoute;\n}\n\n/**\n * 获取路由的路径（父路由和子路由的集合，主要在导航中）\n * @param currentRoute\n * @returns\n */\nexport function getCurrentPathRoutes (currentRoute: RouteTypeExtendsI) {\n  const routes: RouteTypeExtendsI[] = [];\n  let pathRoute: RouteTypeExtendsI | undefined = currentRoute;\n  while (pathRoute) {\n    routes.unshift(pathRoute);\n    pathRoute = pathRoute.parent;\n  }\n  return routes;\n}\n\nexport function executeEventCbs (option: {\n  to?: RouteTypeExtendsI\n  from?: RouteTypeExtendsI\n  callbacks: RouteCbI[]\n  finish: () => void\n}) {\n  const { to, from, callbacks, finish } = option;\n  function executeNextCb (cbIndex = 0) {\n    const nextCb = callbacks[cbIndex];\n    if (!nextCb) {\n      return finish();\n    } else {\n      nextCb.fn(to, from, () => {\n        executeNextCb(cbIndex + 1);\n      });\n    }\n  }\n  if (callbacks.length === 0) {\n    finish();\n  } else {\n    executeNextCb(0);\n  }\n}\n\nfunction getIsHasAuthByStrCode (code: string, permissionList: PermissionListType) {\n  return permissionList.includes(code);\n}\n\nfunction getIsHasAuthByFnCode (code: FnCodeType, route: RouteTypeI) {\n  return code(route);\n}\n\nexport function getIsHasAuth ({ code, permissionList, hasAuth, route }: { code: CodeType; permissionList: PermissionListType; hasAuth: boolean; route: RouteTypeI }) {\n  if (!hasAuth) { // 未配置权限\n    return true;\n  }\n  if (!code) { // 未配置code默认有权限\n    return true;\n  }\n\n  if (Array.isArray(code)) {\n    if (code.length === 0) {\n      return true;\n    }\n    return code.some(_code => {\n      return getIsHasAuthByStrCode(_code, permissionList);\n    });\n  }\n\n  if (code instanceof Function) {\n    return !!(getIsHasAuthByFnCode(code, route));\n  }\n\n  return getIsHasAuthByStrCode(code, permissionList);\n}\n\nexport function computeRoutesConfig (config: {\n  routes: RouteTypeInputI[]\n  permissionList?: string[]\n  hasAuth: boolean\n  beforeEachMount?: BeforeEachMountI\n  parent?: RouteTypeExtendsI\n}): RouteTypeExtendsI[] {\n  const { routes, permissionList = [], hasAuth, beforeEachMount, parent } = config;\n  return routes.map(route => {\n    const {\n      component: Component,\n      path,\n      code = '',\n      children,\n      items,\n      beforeEnter,\n      redirect,\n      meta,\n      type,\n      ...other\n    } = route;\n    let _children: RouteTypeExtendsI[] = [];\n    let _items: RouteTypeExtendsI[] = [];\n    let CurrentComponent = Component;\n    const props = {} as RouteTypePropsI;\n    if (beforeEnter || beforeEachMount) {\n      CurrentComponent = GeneratorHookCom;\n      props.beforeEnter = beforeEnter;\n      props.beforeEachMount = beforeEachMount;\n      props.Component = Component;\n      props.key = route.name; // users switch between routes to avoid incorrect rendering due to the same key after route switching\n      props._route = route;\n    }\n    const isHasAuth = getIsHasAuth({ code, permissionList, hasAuth, route });\n\n    const newRoute: RouteTypeExtendsI = {\n      ...route,\n      parent,\n      props,\n      meta: meta || {},\n      items: [],\n      children: [],\n      _route: route,\n      _isHasAuth: isHasAuth,\n    };\n\n    if (!isHasAuth) {\n      /**\n       * if there is no permission, the children also has no permission\n       * /a/b/c 则加入 /a/b/c/*\n       */\n      let noAuthItems: RouteTypeExtendsI[] = [];\n      if (!path.endsWith('*')) {\n        const _path = path.endsWith('/') ? `${path}*` : `${path}/*`;\n        noAuthItems = [\n          {\n            meta: {},\n            name: getIncrementName(),\n            path: _path,\n            title: '',\n            hidden: true,\n            component: NoAuth,\n            _level: other._level + 1,\n            _route: route,\n            _component: NoAuth,\n            _relativePath: '*',\n          },\n        ];\n      }\n      const returnRoute = {\n        ...newRoute,\n        items: noAuthItems,\n        children: [],\n        _component: NoAuth,\n      };\n      noAuthItems.forEach(i => {\n        i.parent = returnRoute;\n      });\n      return returnRoute;\n    }\n\n    // 处理子路由\n    if (children) {\n      _children = computeRoutesConfig({\n        routes: children,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        parent: newRoute,\n      });\n    }\n    // 处理同级路由\n    if (items) {\n      _items = computeRoutesConfig({\n        routes: items,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        parent: newRoute,\n      });\n    }\n    const _itemsAndChildren = [..._items, ..._children];\n    if (redirect) {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: () => <Navigate to={redirect} replace={true} />,\n        _itemsAndChildren,\n      };\n    }\n    if (type === 'null') {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: undefined,\n        _itemsAndChildren,\n      };\n    }\n    if (Component) {\n      return {\n        ...newRoute,\n        children: _children,\n        items: _items,\n        _component: CurrentComponent,\n        _itemsAndChildren,\n      };\n    } else {\n      const redirectPath = handleRedirectPath(route, permissionList, hasAuth);\n      if (redirectPath) {\n        let replace = false;\n        // 父级也没配置component，则会进行多次重定向进行replace, 以便浏览器回退行为\n        if (!route.parent?.component) {\n          replace = true;\n        }\n        return {\n          ...newRoute,\n          children: _children,\n          items: _items,\n          _component: () => <Navigate to={redirectPath} replace={replace} />,\n          _itemsAndChildren,\n        };\n      }\n      return {\n        ...newRoute,\n        items: [],\n        children: [],\n        _component: NoAuth,\n      };\n    }\n  });\n}\n\nexport function getCurrentRouteCbsByEvent (\n  routeEvent: RouteEvent,\n  pathname: string,\n  routeHooks: RouteCbI[]\n): RouteCbI[] {\n  return routeHooks.filter(i => {\n    return i.name === routeEvent && i.pathname === pathname;\n  });\n}\n\nfunction pathStartMarkTransform (path: string) {\n  if (path === '/') {\n    return path;\n  }\n  return path.replace(/\\/*\\**$/gm, '');\n}\n\n/**\n * when jump route，Remove the '*'\n * @param to\n * @returns\n */\nexport function getRealTo (to: To): To {\n  if (typeof to === 'string') {\n    return pathStartMarkTransform(to);\n  }\n  const { pathname } = to;\n  if (pathname) {\n    return {\n      ...to,\n      pathname: pathStartMarkTransform(pathname),\n    };\n  }\n  return to;\n}\n\nexport const handleRedirectPath = (\n  route: RouteTypeInputI,\n  permissionList: string[],\n  hasAuth: boolean\n): string => {\n  // Return to the first menu(route) item with permission\n  const { items } = route;\n  if (!items) {\n    return '';\n  }\n  // No configuration permission, return to the first one child route\n  if (!hasAuth) {\n    return items[0].path;\n  }\n  let redirectPath = '';\n  // find the first one route with permission\n  for (let i = 0; i < items?.length; i++) {\n    const childRoute = items[i];\n    const { code, path } = childRoute;\n    if (!code) {\n      // if code is false, the default is permission\n      redirectPath = path;\n      break;\n    }\n\n    if (getIsHasAuth({ code, permissionList, hasAuth, route: childRoute })) {\n      redirectPath = path;\n      break;\n    }\n  }\n  return redirectPath;\n};\n\nexport function mixinNotFoundPage (\n  flattenRoutes: RouteTypeExtendsI[],\n  basename: string,\n  authInputRoutes: RouteTypeExtendsI[]\n) {\n  const notFoundPath = getWholePath('*', basename);\n  const hasNotFoundPage = flattenRoutes.some(({ path }) => {\n    if (path === notFoundPath) {\n      return true;\n    }\n    return false;\n  });\n  if (hasNotFoundPage) {\n    return;\n  }\n\n  const notFoundPage = {\n    name: 'notFound',\n    title: 'notFound',\n    meta: {},\n    path: notFoundPath,\n    component: NotFound,\n    _component: NotFound,\n    _relativePath: notFoundPath,\n    _level: 0,\n  };\n  authInputRoutes.push(notFoundPage);\n  flattenRoutes.push(notFoundPage);\n}\n\n// determine whether it is a react component\n// react Components are characterized by functions\n\nexport function isComponent (component: any): component is React.ComponentType<any> {\n  if (component instanceof Function) {\n    return true;\n  }\n  return false;\n}\n\nexport function isString (str: any): str is string {\n  if (typeof str === 'string') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * 1、To support ts, users are prompted when writing code\n * 2、Modify global configuration\n * 3、Add '_isDefined' attribute, Used by MRouter to defined whether the object has been called defineRouterConfig\n * @param routerConfig\n * @returnsRouterBaseConfigI\n */\nlet _defineId = 0;\nexport function defineRouterConfig (routerConfig: RouterConfigI): RouterBaseConfigI {\n  const { LoadingComponent, ..._config } = routerConfig;\n  _defineId = _defineId + 1;\n  if (LoadingComponent) {\n    setChangeable({LoadingComponent})\n  }\n  /** add '_isDefined' attribute */\n  const config: RouterBaseConfigI = {..._config, _isDefined: true, _defineId: _defineId}\n  return config;\n}\n\ninterface ArrayLike<T> extends Array<T> {\n  readonly length: number\n  readonly [n: number]: T\n}\ntype Many<T> = T | ReadonlyArray<T>;\n\nexport function flattenArr<T> (ary: ArrayLike<Many<T>> | null | undefined): T[] {\n  if (!ary) {\n    return [];\n  }\n  return ary.reduce((pre: T[], cur) => {\n    return pre.concat(Array.isArray(cur) ? flattenArr(cur) : cur);\n  }, [] as T[]);\n}\n\n\n","import { NewStateI, NewStateQueryI } from \"./type\";\nimport { computedNewState } from \"./util\";\n\n// Initialized data to prevent double calculation\n// defineRouterConfig may be called multiple times in the same application\nlet initialStateMap = new Map<\n  number,\n  {\n    queryData: NewStateQueryI;\n    initialData: NewStateI;\n  }\n>();\n\nfunction getSameQueryData(\n  prevData: NewStateQueryI,\n  currentData: NewStateQueryI\n) {\n  return (\n    prevData.basename === currentData.basename &&\n    prevData.hasAuth === currentData.hasAuth &&\n    prevData.beforeEachMount === currentData.beforeEachMount &&\n    prevData.inputRoutes === currentData.inputRoutes && \n    prevData.permissionList === currentData.permissionList\n  );\n}\nfunction getInitialState(\n  currentQueryData: NewStateQueryI & { _defineId: number }\n): NewStateI {\n  const {\n    inputRoutes,\n    hasAuth,\n    permissionList,\n    beforeEachMount,\n    basename,\n    location,\n    _defineId\n  } = currentQueryData;\n  const prevData = initialStateMap.get(_defineId);\n  if (prevData) {\n    const isSameQueryData = getSameQueryData(\n      prevData.queryData,\n      currentQueryData\n    );\n    if (isSameQueryData) {\n      return prevData.initialData;\n    }\n  }\n  const _initialState = computedNewState({\n    inputRoutes,\n    permissionList,\n    hasAuth,\n    beforeEachMount,\n    basename,\n    location\n  });\n  initialStateMap.set(_defineId, {\n    queryData: currentQueryData,\n    initialData: _initialState\n  });\n  return _initialState;\n}\n\nexport default getInitialState;\n","import * as React from 'react';\nimport type { RouteHistoryObject } from '../type';\n\nconst MRouterHistoryContext = React.createContext<RouteHistoryObject>(null!);\nMRouterHistoryContext.displayName = 'MRouterHistoryContext';\n\nexport function useHistory () {\n  return React.useContext(MRouterHistoryContext).history;\n}\n\nexport function useRouteHooks () {\n  return React.useContext(MRouterHistoryContext).routeHooks;\n}\n\nexport function useRouteHooksRef () {\n  return React.useContext(MRouterHistoryContext).routeHooksRef;\n}\n\nexport function useHistoryMethods () {\n  return React.useContext(MRouterHistoryContext).historyMethods;\n}\n\nexport default MRouterHistoryContext;\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport type { BrowserRouterProps, Location } from \"react-router-dom\";\nimport { Router } from \"react-router-dom\";\nimport type { BrowserHistory } from \"@remix-run/router\";\nimport { createBrowserHistory } from \"@remix-run/router\";\nimport type { RouteCbI, RouteHistoryObject } from \"./type\";\nimport MRouterHistoryContext from \"./Context/MRouterHistoryContext\";\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport default function BrowserRouter({\n  basename,\n  children,\n  syncUpdateCurrentRoute\n}: BrowserRouterProps & {\n  syncUpdateCurrentRoute: (location: Location) => void;\n}) {\n  const historyRef = React.useRef<BrowserHistory>(null!);\n  const routeHooksRef = React.useRef<RouteCbI[]>(null!);\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({ window });\n    routeHooksRef.current = [];\n  }\n\n  const historyContext = useMemo(() => {\n    return {\n      history: historyRef.current as BrowserHistory,\n      routeHooks: routeHooksRef.current as RouteCbI[],\n      routeHooksRef,\n      historyMethods: {\n        push: historyRef.current.push,\n        replace: historyRef.current.replace,\n        go: historyRef.current.go\n      }\n    } as RouteHistoryObject;\n  }, []);\n\n  const history = historyRef.current;\n\n  const [state, setState] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n\n  React.useLayoutEffect(() => {\n    let mounted = true;\n    history.listen(routeData => {\n      const { location } = routeData;\n      if (!mounted) {\n        return;\n      }\n      unstable_batchedUpdates(() => {\n        setState(routeData);\n        syncUpdateCurrentRoute(location);\n      });\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [history, syncUpdateCurrentRoute]);\n  return (\n    <MRouterHistoryContext.Provider value={historyContext}>\n      <Router\n        basename={basename}\n        location={state.location}\n        navigationType={state.action}\n        navigator={history}\n      >\n        {children}\n      </Router>\n    </MRouterHistoryContext.Provider>\n  );\n}\n","import * as React from \"react\";\nimport { useMemo } from \"react\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport type { BrowserRouterProps, Location } from \"react-router-dom\";\nimport { Router } from \"react-router-dom\";\nimport { HashHistory, createHashHistory } from \"@remix-run/router\";\nimport type { RouteCbI, RouteHistoryObject } from \"./type\";\nimport MRouterHistoryContext from \"./Context/MRouterHistoryContext\";\n\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nexport default function HashRouter({\n  basename,\n  children,\n  syncUpdateCurrentRoute\n}: BrowserRouterProps & {\n  syncUpdateCurrentRoute: (location: Location) => void;\n}) {\n  const historyRef = React.useRef<HashHistory>(null!);\n  const routeHooksRef = React.useRef<RouteCbI[]>(null!);\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({ window });\n    routeHooksRef.current = [];\n  }\n  const historyContext = useMemo(() => {\n    return {\n      history: historyRef.current as HashHistory,\n      routeHooks: routeHooksRef.current as RouteCbI[],\n      routeHooksRef,\n      historyMethods: {\n        push: historyRef.current.push,\n        replace: historyRef.current.replace,\n        go: historyRef.current.go\n      }\n    } as RouteHistoryObject;\n  }, []);\n\n  const history = historyRef.current;\n\n  const [state, setState] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n\n  React.useLayoutEffect(() => {\n    let mounted = true;\n    history.listen(routeData => {\n      const { location } = routeData;\n      if (!mounted) {\n        return;\n      }\n      unstable_batchedUpdates(() => {\n        setState(routeData);\n        syncUpdateCurrentRoute(location);\n      });\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [history, syncUpdateCurrentRoute]);\n  return (\n    <MRouterHistoryContext.Provider value={historyContext}>\n      <Router\n        basename={basename}\n        location={state.location}\n        navigationType={state.action}\n        navigator={history}\n      >\n        {children}\n      </Router>\n    </MRouterHistoryContext.Provider>\n  );\n}\n","import type { NavigateOptions, To } from \"react-router-dom\";\nimport type { ParsedQuery } from \"query-string\";\nimport type { BrowserHistory, Location } from \"history\";\nimport * as React from \"react\";\n\nexport interface RouterBaseConfigI {\n  routes: RouteTypeI[];\n  basename?: string;\n  beforeEachMount?: BeforeEachMountI;\n  // the title of the document changes depending on the route switch\n  autoDocumentTitle?:\n    | boolean\n    | ((currentPathRoutes: RouteTypeExtendsI[]) => string);\n  _isDefined: boolean; // 是否是defined的\n  _defineId: number;\n}\n\nexport interface RouterConfigI extends Omit<RouterBaseConfigI, \"_isDefined\"> {\n  /** Lazy component or before next called */\n  LoadingComponent?: React.FunctionComponent<any>;\n  // beforeEachEnter?: BeforeEachEnterI;\n}\n\nexport type PermissionListType = string[];\nexport type CodeType = string | string[] | FnCodeType;\nexport type FnCodeType = (route: RouteTypeI) => boolean;\n\nexport type NextOptionsType =\n  | {\n      name?: string; // if name is configured, it will jump to the route corresponding to the route configuration\n      path?: string; // path\n    }\n  | React.ComponentType<any>; // iff a component is configured, it will be rendered\n\n// global route entry hook\nexport interface BeforeEachMountI {\n  (to: RouteTypeI, next: (nextOptionsType?: NextOptionsType) => void): void;\n}\n\nexport interface BeforeEachEnterI {\n  (to: RouteTypeI, next: (nextOptionsType?: NextOptionsType) => void): void;\n}\n\nexport enum RouteNavTypeEnum {\n  menu,\n  step\n}\nexport interface BeforeEnterI {\n  (\n    to: RouteTypeI | undefined,\n    next: (nextOptionsType?: NextOptionsType) => void\n  ): void;\n}\n\nexport interface BeforeLeaveI {\n  (\n    to: RouteTypeI | undefined,\n    from: RouteTypeI | undefined,\n    next: (ReplaceComponent?: any) => void\n  ): void;\n}\nexport interface RouteTypePropsI {\n  beforeEachMount?: BeforeEachMountI;\n  beforeEnter?: BeforeEnterI;\n  [prop: string]: any;\n}\n\nexport type RouteComponentType = React.LazyExoticComponent<any> | React.FC<any>;\nexport interface RouteTypeI {\n  name: string;\n  path: string;\n  component?: RouteComponentType;\n\n  beforeEnter?: BeforeEnterI;\n  beforeLeave?: BeforeLeaveI;\n  items?: RouteTypeI[]; // same level route\n  children?: RouteTypeI[]; // sub route of multi-level route, such as level-2 route under level-1 route\n  title?: string;\n  hidden?: boolean;\n  icon?: string;\n  code?: CodeType; // each menu item has a code, and the route code of the same menu item is the same\n  parentName?: string; // parent route name\n  fullscreen?: boolean; // if is true, the navigation bar will be hidden\n  props?: RouteTypePropsI;\n  redirect?: string;\n  type?: \"real\" | \"null\";\n\n  meta?: Record<string, any>; // some other information can be customized\n}\n\nexport interface RouteTypeInputI extends RouteTypeI {\n  _relativePath: string;\n  _level: number;\n  items?: RouteTypeInputI[];\n  children?: RouteTypeInputI[];\n  parent?: RouteTypeInputI;\n}\n\nexport interface RouteTypeExtendsI extends RouteTypeInputI {\n  parent?: RouteTypeExtendsI; // parent route name\n\n  meta: Record<string, any>; // some other information can be customized\n  items?: RouteTypeExtendsI[];\n  children?: RouteTypeExtendsI[];\n  _route?: RouteTypeInputI;\n  _component?: RouteComponentType;\n  _isHasAuth?: boolean; // true has permission; false: no permission\n  _itemsAndChildren?: RouteTypeExtendsI[];\n}\n\nexport enum RouterActionEnum {\n  UPDATE_INPUT_ROUTES = \"UPDATE_INPUT_ROUTES\",\n  UPDATE_CURRENT_ROUTE = \"UPDATE_CURRENT_ROUTE\",\n  UPDATE_STATE = \"UPDATE_STATE\",\n  ADD_ROUTES = \"ADD_ROUTES\",\n  REMOVE_ROUTES = \"REMOVE_ROUTES\",\n  UPDATE_ROUTES = \"UPDATE_ROUTES\"\n}\nexport interface Action {\n  type: RouterActionEnum;\n  payload?: any;\n  dispatch?: React.Dispatch<Action>;\n}\n\nexport interface MRouterStateI {\n  basename: string;\n\n  inputRoutes: RouteTypeInputI[];\n  authInputRoutes: RouteTypeExtendsI[];\n\n  routesMap: RoutesMapI;\n  flattenRoutes: RouteTypeExtendsI[];\n  currentRoute: RouteTypeExtendsI;\n  currentPathRoutes: RouteTypeExtendsI[];\n  prevRoute?: RouteTypeExtendsI;\n  permissionList?: string[];\n  hasAuth?: boolean;\n\n  beforeEachMount?: BeforeEachMountI;\n\n  _getNewStateByNewInputRoutes: (\n    _inputRoutes: RouteTypeInputI[]\n  ) => NewStateI;\n}\n\nexport interface AddRoutesI {\n  (routes: RouteTypeI[]): void;\n}\nexport interface RemoveRoutesI {\n  (routeNames: string[]): void;\n}\nexport interface UpdateRoutesI {\n  (routes: { routeName: string; routeData: Partial<RouteTypeI> }[]): void;\n}\nexport interface MRouterMethodsI {\n  addRoutes: AddRoutesI;\n  updateCurrentRoute: (currentRoute: RouteTypeExtendsI) => void;\n  removeRoutes: RemoveRoutesI;\n  updateRoutes: UpdateRoutesI;\n  // getStateByInputRoutes: (inputRoutes: RouteTypeInputI[]) => NewStateI;\n  [method: string]: any;\n}\nexport interface MRouterContextObject {\n  state: MRouterStateI;\n  // Some operation methods\n  methods: MRouterMethodsI;\n}\n\nexport interface RoutesBaseStateStruct {\n  routesMap: RoutesMapI;\n  routes: RouteTypeI[];\n  // flat routing\n  flattenRoutes: RouteTypeI[];\n  basename?: string;\n}\nexport interface ExtraNavigateOptions extends NavigateOptions {\n  params?: Record<string, any>; // url parameters of the route, for example: id\n  query?: Record<string, any>; // url query\n}\nexport interface NavigateFunction {\n  (to: To, options?: ExtraNavigateOptions): void;\n  (delta: number): void;\n}\nexport interface RoutesStateStruct extends RoutesBaseStateStruct {\n  navigate: NavigateFunction;\n  location: Location;\n  currentRoute: RouteTypeExtendsI;\n  authRoutes: RouteTypeExtendsI[];\n  query: ParsedQuery<string>;\n  params: Record<string, number | string>;\n}\n\nexport type RouteEvent = \"BeforeRouterLeave\" | \"AfterRouterEnter\";\n\nexport interface RouteCbI {\n  fn: BeforeLeaveI;\n  name: RouteEvent;\n  pathname: string;\n}\n\nexport interface RouteConfig {\n  path: string;\n  element?: React.ReactNode;\n  children?: RouteConfig[];\n}\n\nexport interface RouteHistoryObject {\n  history: BrowserHistory;\n  historyMethods: {\n    push(to: To, state?: any): void;\n    replace(to: To, state?: any): void;\n    go(delta: number): void;\n    back(): void;\n    forward(): void;\n  };\n  routeHooks: RouteCbI[];\n  routeHooksRef: React.MutableRefObject<RouteCbI[]>;\n}\nexport interface BaseRoutesMapI extends Record<string, RouteTypeExtendsI> {}\n\nexport type RoutesMapI = BaseRoutesMapI & {\n  __paramsRoutesMap: Record<string, RouteTypeExtendsI>;\n  __flattenRoutes: RouteTypeExtendsI[];\n};\n\nexport interface NewStateQueryI {\n  inputRoutes: RouteTypeInputI[];\n  permissionList?: string[];\n  hasAuth: boolean;\n  beforeEachMount?: BeforeEachMountI;\n  basename: string;\n  location: Location;\n}\n\nexport interface NewStateI {\n  authInputRoutes: RouteTypeExtendsI[];\n  flattenRoutes: RouteTypeExtendsI[];\n  routesMap: RoutesMapI;\n  currentRoute: RouteTypeExtendsI;\n  currentPathRoutes: RouteTypeExtendsI[];\n  beforeEachMount?: BeforeEachMountI | undefined;\n}\n","import type {\n  RouteTypeI,\n  MRouterStateI,\n  RouteTypeInputI,\n} from \"./type\";\nimport { cloneRoutes, computedNewState } from \"./util\";\n\nfunction newInputRoutesState(inputRoutes?: RouteTypeInputI[]): {\n  inputRoutes: RouteTypeInputI[];\n  routesMap: Record<string, RouteTypeInputI>;\n} {\n  const routesMap: Record<string, RouteTypeInputI> = {};\n  function _cloneInputRoutes(\n    inputRoutes?: RouteTypeInputI[],\n    parent?: RouteTypeInputI\n  ): RouteTypeInputI[] {\n    if (!inputRoutes) {\n      return [];\n    }\n    return inputRoutes.map(i => {\n      const _route: RouteTypeInputI = {\n        ...i,\n        items: [],\n        children: [],\n        parent: parent\n      };\n      _route.items = _cloneInputRoutes(i.items, _route);\n      _route.children = _cloneInputRoutes(i.children, _route);\n      routesMap[i.name] = _route;\n      return _route;\n    }, []);\n  }\n  return {\n    inputRoutes: _cloneInputRoutes(inputRoutes),\n    routesMap: routesMap\n  };\n}\n\n/**\n * add routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function addRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  const newRoutes = payload as RouteTypeI[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n\n  newRoutes.forEach(_route => {\n    const { path, name, parentName } = _route;\n\n    if (routesMap[path] || routesMap[name]) {\n      throw new Error(`新增路由 ${name} ${path} 已经存在，请修改`);\n    }\n\n    if (parentName) {\n      const _parentRoute = routesMap[parentName];\n      if (_parentRoute) {\n        const route = cloneRoutes({\n          routes: [_route],\n          parent: _parentRoute,\n          _level: _parentRoute._level! + 1\n        });\n        _parentRoute.items = _parentRoute.items || [];\n        _parentRoute.items.push(route[0]);\n        hasChange = true;\n      }\n    } else {\n      // 根路径插入\n      const route = cloneRoutes({\n        routes: [_route],\n        _level: 0\n      });\n      inputRoutes.push(route[0]);\n      hasChange = true;\n    }\n  });\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  }\n  return state;\n}\n/**\n * update routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function updateRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  // const { basename } = state;\n  const newRoutesPayload = payload as {\n    routeName: string;\n    routeData: Partial<RouteTypeI>;\n  }[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n  newRoutesPayload.forEach(({ routeName, routeData }) => {\n    const route = routesMap[routeName];\n    if (route) {\n      // 如果parent存在，则不是根节点\n      const parent = route.parent;\n\n      const _newRouteData = {\n        ...route,\n        ...routeData\n      };\n\n      const newRouteData = cloneRoutes({\n        routes: [_newRouteData],\n        parent,\n        _level: (parent?._level || 0) + 1,\n        basename: state.basename\n      });\n\n      if (!parent) {\n        Object.assign(route, newRouteData[0]);\n        hasChange = true;\n      }\n      if (parent && parent.items) {\n        parent.items.splice(parent.items.indexOf(route), 1, newRouteData[0]);\n        hasChange = true;\n      } else if (parent && parent.children) {\n        parent.children.splice(\n          parent.children.indexOf(route),\n          1,\n          newRouteData[0]\n        );\n        hasChange = true;\n      }\n    }\n  });\n\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  }\n  return state;\n}\n/**\n * remove routes operation\n * @param state MRouterStateI\n * @param payload RouteTypeI[]\n * @returns MRouterStateI\n */\nexport function removeRoutesAction(\n  state: MRouterStateI,\n  payload: any\n): MRouterStateI {\n  let hasChange = false;\n  const routeNames = payload as string[];\n  const { routesMap, inputRoutes } = newInputRoutesState(state.inputRoutes);\n  routeNames.forEach(routeName => {\n    const _route = routesMap[routeName];\n    if (_route) {\n      // 如果parent存在，则不是根节点\n      const parent = _route.parent;\n      if (!parent) {\n        const index = inputRoutes.indexOf(_route);\n        if (index > -1) {\n          inputRoutes.splice(index, 1);\n          hasChange = true;\n        }\n      }\n      if (parent && parent.items) {\n        const index = parent.items.indexOf(_route);\n        if (index > -1) {\n          parent.items.splice(index, 1);\n          hasChange = true;\n        }\n      }\n    }\n  });\n  if (hasChange) {\n    const newState = state._getNewStateByNewInputRoutes(inputRoutes);\n    return {\n      ...state,\n      ...newState,\n      inputRoutes: [...inputRoutes]\n    };\n  } else {\n    return state;\n  }\n}\n","import * as React from 'react';\nimport { addRoutesAction, removeRoutesAction, updateRoutesAction } from '../actions';\nimport type {\n  Action,\n  AddRoutesI,\n  RoutesMapI,\n  UpdateRoutesI,\n  MRouterContextObject,\n  MRouterStateI,\n} from '../type';\nimport {\n  RouterActionEnum\n} from '../type';\n\nconst MRouterContext = React.createContext<MRouterContextObject>({\n  state: {\n    inputRoutes: [],\n    authInputRoutes: [],\n    permissionList: [],\n    routesMap: {} as RoutesMapI,\n    flattenRoutes: [],\n  },\n  methods: {},\n} as unknown as MRouterContextObject);\nMRouterContext.displayName = 'MRouterContext';\n\nexport function MRouterReducer (state: MRouterStateI, action: Action): MRouterStateI {\n  const { type, payload } = action;\n  switch (type) {\n    case RouterActionEnum.ADD_ROUTES: {\n      return addRoutesAction(state, payload);\n    }\n    case RouterActionEnum.REMOVE_ROUTES: {\n      return removeRoutesAction(state, payload);\n    }\n    case RouterActionEnum.UPDATE_ROUTES: {\n      return updateRoutesAction(state, payload);\n    }\n    case RouterActionEnum.UPDATE_INPUT_ROUTES: {\n      return {\n        ...state,\n        inputRoutes: payload,\n      };\n    }\n    case RouterActionEnum.UPDATE_CURRENT_ROUTE: {\n      return {\n        ...state,\n        currentRoute: payload,\n      };\n    }\n    case RouterActionEnum.UPDATE_STATE: {\n      return {\n        ...state,\n        ...payload,\n      };\n    }\n    default: {\n      return { ...state };\n    }\n  }\n}\n\nexport function useRouterState (): MRouterStateI {\n  return React.useContext(MRouterContext).state;\n}\n\n/** Dynamically add routing method */\nexport function useAddRoutes (): AddRoutesI {\n  return React.useContext(MRouterContext).methods.addRoutes;\n}\n\nexport function useRemoveRoutes (): (routeNames: string[]) => void {\n  return React.useContext(MRouterContext).methods.removeRoutes;\n}\n\nexport function useUpdateRoutes (): UpdateRoutesI {\n  return React.useContext(MRouterContext).methods.updateRoutes;\n}\n\nexport default MRouterContext;\n","import * as React from 'react';\nimport {\n  Suspense,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState\n} from \"react\";\nimport type { Location, To } from \"react-router-dom\";\nimport {\n  generatePath,\n  useLocation,\n  useNavigate as useOldNavigate,\n  useParams,\n  useRoutes\n} from \"react-router\";\nimport { parse, stringify } from \"query-string\";\n\nimport {\n  cloneRoutes,\n  computedNewState,\n  executeEventCbs,\n  flattenArr,\n  getCurrentPathRoutes,\n  getCurrentRoute,\n  getCurrentRouteCbsByEvent,\n  getRealTo\n} from \"./util\";\nimport getInitialState from \"./getInitialState\";\nimport BrowserRouter from \"./BrowserRouter\";\nimport HashRouter from \"./HashRouter\";\nimport type {\n  BeforeLeaveI,\n  ExtraNavigateOptions,\n  RouteCbI,\n  RouteConfig,\n  RouteTypeExtendsI,\n  RouteTypeI,\n  RoutesMapI,\n  RoutesStateStruct,\n  RouterBaseConfigI,\n  RouteTypeInputI,\n  NewStateI\n} from \"./type\";\nimport { RouterActionEnum } from \"./type\";\nimport MRouterContext, {\n  MRouterReducer,\n  useAddRoutes,\n  useRemoveRoutes,\n  useRouterState,\n  useUpdateRoutes\n} from \"./Context/MRouterContext\";\nimport {\n  useHistory,\n  useHistoryMethods,\n  useRouteHooksRef\n} from \"./Context/MRouterHistoryContext\";\nimport { changeable } from \"./changeable\";\n\nexport type { RouterConfigI, RouteTypeI, RouteTypeExtendsI } from \"./type\";\n\nexport { defineRouterConfig } from \"./util\";\n\nconst DEFAULT_PERMISSION_LIST: string[] = [];\n\nfunction useBeforeLeave(fn: BeforeLeaveI): void {\n  const pathname = window.location.pathname;\n  const routeHooksRef = useRouteHooksRef();\n  useLayoutEffect(() => {\n    const hooks = routeHooksRef.current;\n    const routeHook = {\n      name: \"BeforeRouterLeave\",\n      pathname,\n      fn\n    } as RouteCbI;\n    hooks.push(routeHook);\n    return () => {\n      const index = hooks.indexOf(routeHook);\n      hooks.splice(index, 1);\n    };\n  }, [fn, pathname, routeHooksRef]);\n}\nexport interface NavigateFunction {\n  (to: To, options?: ExtraNavigateOptions): void;\n  (delta: number): void;\n}\n\nconst useNavigate = (): NavigateFunction => {\n  const oldNavigate = useOldNavigate();\n  const newCallback = useCallback(\n    (to, options: ExtraNavigateOptions = {}) => {\n      if (options?.params && typeof to === \"string\") {\n        to = generatePath(to, options.params);\n      }\n      // query写入地址栏\n      if (options?.query && typeof to === \"string\") {\n        let path = to;\n        const queryStr = stringify(options.query);\n        if (path.includes(\"?\")) {\n          path = `${path}&${queryStr}`;\n        } else {\n          path = `${path}?${queryStr}`;\n        }\n        to = path;\n      }\n\n      return oldNavigate(to, options);\n    },\n    [oldNavigate]\n  );\n  return newCallback;\n};\n\nfunction useRouter(): RoutesStateStruct {\n  const location = useLocation();\n  const routesMapRef = useRef<RoutesMapI>({} as RoutesMapI);\n  const {\n    routesMap,\n    inputRoutes,\n    currentRoute,\n    flattenRoutes,\n    authInputRoutes,\n    basename\n  } = useRouterState();\n\n  if (routesMapRef.current !== routesMap) {\n    routesMapRef.current = routesMap;\n  }\n\n  const search = useMemo(() => {\n    return parse(location.search);\n  }, [location.search]);\n\n  const routerParams = useParams();\n\n  const newNavigate = useNavigate();\n\n  return {\n    navigate: newNavigate,\n    routesMap,\n    query: search,\n    params: routerParams as Record<string, string | number>,\n    routes: inputRoutes,\n    authRoutes: authInputRoutes,\n    currentRoute,\n    flattenRoutes,\n    location,\n    basename\n  };\n}\n\ninterface MRouterContextProviderI {\n  permissionList?: string[];\n  hasAuth: boolean;\n  routerConfig: RouterBaseConfigI;\n  children?: (children: React.ReactNode) => React.ReactNode;\n}\n\ninterface InternalMRouterContextProviderRef {\n  updateCurrentRoute: (location: Location) => void;\n}\n\nconst InternalMRouterContextProvider: React.ForwardRefRenderFunction<\n  InternalMRouterContextProviderRef,\n  MRouterContextProviderI\n> = (\n  { permissionList = DEFAULT_PERMISSION_LIST, routerConfig, hasAuth, children },\n  ref\n) => {\n  const history = useHistory();\n  const location = useLocation();\n  const locationRef = useRef(location);\n\n  const oldHistoryMethods = useHistoryMethods();\n  const routeHooksRef = useRouteHooksRef();\n\n  const {\n    routes = [],\n    basename = \"/\",\n    beforeEachMount,\n    autoDocumentTitle = false\n  } = routerConfig;\n\n  const inputRoutes = useMemo(() => {\n    return cloneRoutes({\n      routes,\n      basename\n    });\n  }, [basename, routes]);\n\n  const inputRoutesRef = useRef(inputRoutes);\n\n  const [initialState] = useState(\n    getInitialState({\n      inputRoutes,\n      permissionList,\n      hasAuth,\n      beforeEachMount,\n      basename,\n      location: locationRef.current,\n      _defineId: routerConfig._defineId\n    })\n  );\n\n  const getNewStateByNewInputRoutesRef = useRef<\n    (_inputRoutes: RouteTypeInputI[]) => NewStateI\n  >(null!);\n  const _getNewStateByNewInputRoutes = useCallback(\n    (_inputRoutes: RouteTypeInputI[]) => {\n      return computedNewState({\n        inputRoutes: _inputRoutes,\n        permissionList,\n        hasAuth,\n        beforeEachMount,\n        basename,\n        location: location\n      });\n    },\n    [basename, beforeEachMount, hasAuth, location, permissionList]\n  );\n  getNewStateByNewInputRoutesRef.current = _getNewStateByNewInputRoutes;\n\n  // initialization\n  const [state, dispatch] = useReducer(MRouterReducer, {\n    ...initialState,\n    inputRoutes,\n    permissionList,\n    hasAuth,\n    basename,\n    _getNewStateByNewInputRoutes: getNewStateByNewInputRoutesRef.current\n  });\n\n  /**\n   * listen router change，set currentRoute\n   *  Put the updated currentRoute in history listen updates in batches to reduce the number of updates\n   */\n  useImperativeHandle(ref, () => {\n    return {\n      updateCurrentRoute(location) {\n        const { pathname } = location;\n        const prevRoute = state.currentRoute;\n        const currentRoute = getCurrentRoute(pathname, state.routesMap);\n\n        let currentPathRoutes = state.currentPathRoutes;\n        if (currentRoute !== state.currentRoute) {\n          currentPathRoutes = getCurrentPathRoutes(currentRoute);\n        }\n        dispatch({\n          type: RouterActionEnum.UPDATE_STATE,\n          payload: {\n            currentRoute,\n            currentPathRoutes,\n            prevRoute\n          }\n        });\n      }\n    };\n  });\n\n  useLayoutEffect(() => {\n    // filter routes without permission\n    // used to judge initialization or update. If they are equal, only currentRoute needs to be calculated\n    if (\n      state.permissionList === permissionList &&\n      hasAuth === state.hasAuth &&\n      state.inputRoutes === inputRoutes &&\n      state.beforeEachMount === beforeEachMount\n    ) {\n      return;\n    }\n    // if inputRoutes change, the incoming inputRoutes shall prevail\n    let _inputRoutes = state.inputRoutes;\n    if (\n      inputRoutesRef.current === inputRoutes &&\n      state.permissionList === permissionList &&\n      hasAuth === state.hasAuth &&\n      state.beforeEachMount === beforeEachMount\n    ) {\n      // Equal, indicating that state.inputRoutes has changed, is add remove and update routes\n      return;\n    } else {\n      // if not Equal, record the value of inputRoutes for next comparison\n      inputRoutesRef.current = inputRoutes;\n      _inputRoutes = inputRoutes;\n    }\n\n    const {\n      authInputRoutes,\n      flattenRoutes,\n      routesMap,\n      currentRoute,\n      currentPathRoutes\n    } = computedNewState({\n      inputRoutes: _inputRoutes,\n      permissionList,\n      hasAuth,\n      beforeEachMount,\n      basename,\n      location\n    });\n\n    dispatch({\n      type: RouterActionEnum.UPDATE_STATE,\n      payload: {\n        permissionList,\n        authInputRoutes,\n        routesMap,\n        flattenRoutes,\n        currentRoute,\n        currentPathRoutes,\n        basename,\n        beforeEachMount\n      }\n    });\n  }, [\n    state.inputRoutes,\n    inputRoutes,\n    permissionList,\n    state.permissionList,\n    hasAuth,\n    state.hasAuth,\n    basename,\n    beforeEachMount,\n    location\n  ]);\n\n  // auto setting document.title\n  useEffect(() => {\n    if (!autoDocumentTitle) {\n      return;\n    }\n    let title = \"\";\n    if (typeof autoDocumentTitle === \"boolean\") {\n      title = state.currentPathRoutes\n        .map(i => {\n          return i.title;\n        })\n        .join(\"-\");\n    } else if (typeof autoDocumentTitle === \"function\") {\n      title = autoDocumentTitle(state.currentPathRoutes);\n    }\n    document.title = title;\n  }, [autoDocumentTitle, state.currentPathRoutes]);\n\n  const allExecuteEventCbs = useCallback(\n    (historyCb: () => void, to?: To) => {\n      if (typeof to !== \"string\") {\n        to = to?.pathname;\n      }\n      const pathname = window.location.pathname;\n      const beforeRouterLeaveCbs = getCurrentRouteCbsByEvent(\n        \"BeforeRouterLeave\",\n        pathname,\n        routeHooksRef.current\n      );\n      if (state.currentRoute?.beforeLeave) {\n        beforeRouterLeaveCbs.unshift({\n          name: \"BeforeRouterLeave\",\n          pathname: state.currentRoute.path,\n          fn: state.currentRoute.beforeLeave as BeforeLeaveI\n        });\n      }\n      if (beforeRouterLeaveCbs.length) {\n        executeEventCbs({\n          to: getCurrentRoute(to as string, state.routesMap),\n          from: getCurrentRoute(pathname, state.routesMap),\n          callbacks: beforeRouterLeaveCbs,\n          finish: () => {\n            return historyCb();\n          }\n        });\n      } else {\n        return historyCb();\n      }\n    },\n    [\n      routeHooksRef,\n      state.currentRoute.beforeLeave,\n      state.currentRoute.path,\n      state.routesMap\n    ]\n  );\n\n  useLayoutEffect(() => {\n    // Intercept the methods used in history in useNavigator\n    history.go = (delta: number) => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.go(delta);\n        // history.go = oldHistoryMethods.go;\n        return res;\n      });\n    };\n    history.push = (to: To, state?: any) => {\n      to = getRealTo(to);\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.push(to, state);\n        // history.push = oldHistoryMethods.push;\n        return res;\n      }, to);\n    };\n\n    history.replace = (to: To, state?: any) => {\n      to = getRealTo(to);\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.replace(to, state);\n        // history.replace = oldHistoryMethods.replace;\n        return res;\n      }, to);\n    };\n\n    history.back = () => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.back();\n        // history.back = oldHistoryMethods.back;\n        return res;\n      });\n    };\n\n    history.forward = () => {\n      allExecuteEventCbs(() => {\n        const res = oldHistoryMethods.forward();\n        // history.forward = oldHistoryMethods.forward;\n        return res;\n      });\n    };\n  }, [allExecuteEventCbs, history, oldHistoryMethods]);\n\n  const addRoutes = useCallback((newRoutes: RouteTypeI[]) => {\n    dispatch({\n      type: RouterActionEnum.ADD_ROUTES,\n      payload: newRoutes\n    });\n  }, []);\n\n  const removeRoutes = useCallback((routeNames: string[]) => {\n    dispatch({\n      type: RouterActionEnum.REMOVE_ROUTES,\n      payload: routeNames\n    });\n  }, []);\n\n  const updateRoutes = useCallback(\n    (routes: { routeName: string; routeData: Partial<RouteTypeI> }[]) => {\n      dispatch({\n        type: RouterActionEnum.UPDATE_ROUTES,\n        payload: routes\n      });\n    },\n    []\n  );\n\n  const updateCurrentRoute = useCallback((currentRoute: RouteTypeExtendsI) => {\n    if (!currentRoute) {\n      return;\n    }\n    dispatch({\n      type: RouterActionEnum.UPDATE_CURRENT_ROUTE,\n      payload: currentRoute\n    });\n  }, []);\n\n  const routesConfig = useMemo(() => {\n    function _computeRoutesConfig(routes: RouteTypeExtendsI[]) {\n      const _routes = routes.map(route => {\n        let _routeConfig: RouteConfig | undefined;\n        let _itemsRouteConfig: RouteConfig[] = [];\n        const {\n          _component: Component,\n          path,\n          items,\n          children,\n          _isHasAuth,\n          props\n        } = route;\n        if (Component) {\n          const LoadingCmp = changeable.LoadingComponent;\n          if (!_isHasAuth) {\n            /** Without permission, the child also has no permission */\n            return {\n              path: path.endsWith(\"*\") ? path : `${path}/*`,\n              element: (\n                <Suspense fallback={<LoadingCmp />}>\n                  <Component {...props} />\n                </Suspense>\n              )\n            } as RouteConfig;\n          }\n          _routeConfig = {\n            path,\n            element: (\n              <Suspense fallback={LoadingCmp}>\n                <Component {...props} />\n              </Suspense>\n            )\n          } as RouteConfig;\n          if (children) {\n            _routeConfig.children = _computeRoutesConfig(children);\n          }\n          if (items) {\n            _itemsRouteConfig = _computeRoutesConfig(items);\n          }\n        }\n\n        const nextRoutes = [_routeConfig, ..._itemsRouteConfig].filter(i => {\n          return i !== undefined;\n        }) as RouteConfig[];\n        return nextRoutes;\n      });\n      return flattenArr(_routes);\n    }\n    const _routesConfig = _computeRoutesConfig(state.authInputRoutes);\n    return _routesConfig;\n  }, [state.authInputRoutes]);\n\n  const routesChildren = useRoutes(routesConfig);\n\n  const renders = useMemo(() => {\n    return children ? children(routesChildren) : routesChildren;\n  }, [children, routesChildren]);\n\n  return (\n    <MRouterContext.Provider\n      value={{\n        state,\n        methods: {\n          addRoutes,\n          updateCurrentRoute,\n          removeRoutes,\n          updateRoutes\n        }\n      }}\n    >\n      {renders}\n    </MRouterContext.Provider>\n  );\n};\n\nconst MRouterContextProvider = React.forwardRef(InternalMRouterContextProvider);\n\nMRouterContextProvider.displayName = \"MRouterContextProvider\";\n\ninterface MRouterPropsI {\n  permissionList?: string[];\n  wrapComponent?: React.FunctionComponent<any>;\n  hasAuth?: boolean;\n  routerConfig: RouterBaseConfigI;\n  children?: (children: React.ReactNode) => React.ReactNode;\n}\ninterface CoreRouterPropsI extends MRouterPropsI {\n  RouterComponent: typeof BrowserRouter | typeof HashRouter;\n}\nconst CoreRouter: React.FC<CoreRouterPropsI> = ({\n  permissionList,\n  wrapComponent: WrapComponent,\n  hasAuth = true,\n  routerConfig,\n  children,\n  RouterComponent\n}) => {\n  const syncUpdateCurrentRouteRef = useRef<{\n    updateCurrentRoute: (location: Location) => void;\n  }>(null!);\n  const syncUpdateCurrentRoute = useCallback(location => {\n    syncUpdateCurrentRouteRef.current?.updateCurrentRoute?.(location);\n  }, []);\n\n  if (__DEV__) {\n    /** Determine whether routerConfig has ‘_isDefined’ attribute */\n    if (!routerConfig._isDefined) {\n      console.error(\n        `The routerConfig does not call defineRouterConfig definition, You should use 'const routerConfig = defineRouterConfig({...})'`\n      );\n    }\n    /** Judge incoming 'WrapComponent' and 'children' */\n    if (WrapComponent && children) {\n      console.warn(\n        `MRouter attributes 'children' and 'WrapComponent' are optional attributes. If both exist, children will be used`\n      );\n    }\n    if (children && typeof children !== \"function\") {\n      console.error(\n        'MRoute attributes children needs to be a function, not a function at present  \"%s\"',\n        children\n      );\n    }\n  }\n\n  const _children = useMemo(() => {\n    if (children && typeof children === \"function\") {\n      return children;\n    }\n    if (WrapComponent) {\n      WrapComponent.displayName = \"WrapComponent\";\n      return function wrapComponent(children: React.ReactNode) {\n        return <WrapComponent>{children}</WrapComponent>;\n      };\n    }\n  }, [WrapComponent, children]);\n\n  return (\n    <RouterComponent syncUpdateCurrentRoute={syncUpdateCurrentRoute}>\n      <MRouterContextProvider\n        routerConfig={routerConfig}\n        permissionList={permissionList}\n        hasAuth={hasAuth}\n        ref={syncUpdateCurrentRouteRef}\n      >\n        {_children}\n      </MRouterContextProvider>\n    </RouterComponent>\n  );\n};\n\nconst MRouter: React.FC<MRouterPropsI> = props => {\n  return <CoreRouter {...props} RouterComponent={BrowserRouter} />;\n};\n\nconst MHRouter: React.FC<MRouterPropsI> = props => {\n  return <CoreRouter {...props} RouterComponent={HashRouter} />;\n};\n\nexport {\n  MRouter,\n  MHRouter,\n  useAddRoutes,\n  useRemoveRoutes,\n  useUpdateRoutes,\n  useBeforeLeave,\n  useRouter,\n  useHistory,\n  useNavigate\n};\n"],"names":["PageConfig","title","img","NoAuth","code","config","display","justifyContent","alignItems","background","height","flexDirection","borderRadius","color","lineHeight","textAlign","marginTop","displayName","NameRedirect","name","component","Component","routesMap","currentRoute","useRouter","targetRoute","path","Spin","tip","LoadingCmp","changeable","LoadingComponent","setChangeable","options","Object","entries","forEach","key","value","getComponent","ReplaceComponent","isComponent","isString","Redirect","GeneratorHookCom","beforeEnter","beforeEachMount","CurrentComponent","setCurrentComponent","useState","undefined","useLayoutEffect","isActive","EachReplaceComponent","enterOptions","EnterReplaceComponent","NotFound","incrementKey","getIncrementName","getWholePath","basename","parentPath","startsWith","endsWith","slice","cloneRoutes","_routeConfig","routes","parent","_level","_cloneRoutes","_routes","map","_route","items","children","resets","wholePath","newRoute","getValidPathname","_relativePath","computedNewState","inputRoutes","permissionList","hasAuth","location","authInputRoutes","computeRoutesConfig","flattenRoutes","flattenRoutesFn","mixinNotFoundPage","routesMapFn","getCurrentRoute","pathname","currentPathRoutes","getCurrentPathRoutes","arr","all","reduce","prev","nextRoute","Array","isArray","concat","_routeMap","Error","includes","_path","replace","__paramsRoutesMap","__flattenRoutes","window","paths","keys","pathIndex","length","pathPattern","RegExp","match","i","filter","longerPath","pathStartMarkTransform","_isHasAuth","meta","pathRoute","unshift","executeEventCbs","option","to","from","callbacks","finish","executeNextCb","cbIndex","nextCb","fn","getIsHasAuthByStrCode","getIsHasAuthByFnCode","route","getIsHasAuth","some","_code","Function","redirect","type","other","_children","_items","props","isHasAuth","noAuthItems","hidden","_component","returnRoute","_itemsAndChildren","Navigate","redirectPath","handleRedirectPath","getCurrentRouteCbsByEvent","routeEvent","routeHooks","getRealTo","childRoute","notFoundPath","hasNotFoundPage","notFoundPage","push","str","_defineId","defineRouterConfig","routerConfig","_config","_isDefined","flattenArr","ary","pre","cur","initialStateMap","Map","getSameQueryData","prevData","currentData","getInitialState","currentQueryData","get","isSameQueryData","queryData","initialData","_initialState","set","MRouterHistoryContext","React","createContext","useHistory","useContext","history","useRouteHooksRef","routeHooksRef","useHistoryMethods","historyMethods","BrowserRouter","syncUpdateCurrentRoute","historyRef","useRef","current","createBrowserHistory","historyContext","useMemo","go","state","setState","action","mounted","listen","routeData","unstable_batchedUpdates","HashRouter","createHashHistory","RouteNavTypeEnum","RouterActionEnum","newInputRoutesState","_cloneInputRoutes","addRoutesAction","payload","hasChange","newRoutes","parentName","_parentRoute","newState","_getNewStateByNewInputRoutes","updateRoutesAction","newRoutesPayload","routeName","_newRouteData","newRouteData","assign","splice","indexOf","removeRoutesAction","routeNames","index","MRouterContext","methods","MRouterReducer","ADD_ROUTES","REMOVE_ROUTES","UPDATE_ROUTES","UPDATE_INPUT_ROUTES","UPDATE_CURRENT_ROUTE","UPDATE_STATE","useRouterState","useAddRoutes","addRoutes","useRemoveRoutes","removeRoutes","useUpdateRoutes","updateRoutes","DEFAULT_PERMISSION_LIST","useBeforeLeave","hooks","routeHook","useNavigate","oldNavigate","useOldNavigate","newCallback","useCallback","params","generatePath","query","queryStr","stringify","useLocation","routesMapRef","search","parse","routerParams","useParams","newNavigate","navigate","authRoutes","InternalMRouterContextProvider","ref","locationRef","oldHistoryMethods","autoDocumentTitle","inputRoutesRef","initialState","getNewStateByNewInputRoutesRef","_inputRoutes","dispatch","useReducer","useImperativeHandle","updateCurrentRoute","prevRoute","useEffect","join","document","allExecuteEventCbs","historyCb","beforeRouterLeaveCbs","beforeLeave","delta","res","back","forward","routesConfig","_computeRoutesConfig","_itemsRouteConfig","element","nextRoutes","_routesConfig","routesChildren","useRoutes","renders","MRouterContextProvider","forwardRef","CoreRouter","wrapComponent","WrapComponent","RouterComponent","syncUpdateCurrentRouteRef","console","error","warn","MRouter","MHRouter"],"mappings":"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"}